{"version":3,"file":"js/898.f19a0e90.js","mappings":"8aA8GAA,EAAe,CACbC,KAAM,aACNC,WAAY,CAAC,EACbC,OACE,MAAO,CACLC,KAAM,CACJC,SAAU,GACVC,OAAQ,IAEVC,SAAS,EACTC,WAAY,CAAC,EACbC,WAAW,GACXC,SAAS,GACTC,OAAQ,GACRC,YAAa,EACbC,SAAU,GACVC,MAAO,EAEPC,eAAe,EACfC,WAAW,CAACC,UAAU,GACtBC,QAAQ,CACNC,MAAOC,KAAKC,MAAMC,eAAeC,QAAQ,WAG3CC,UAAW,GACXC,eAAe,UAAYC,OAAOC,OAAOF,eAAiB,8BAC1DG,iBAAkB,GAClBC,eAAgB,GAChBC,QAAS,GACTC,IAAK,GACLC,cAAe,GACfC,QAAQ,EAGZ,EACAC,UACEC,QAAQC,IAAIC,KAAKnB,SACjBmB,KAAKC,OACLD,KAAKE,gBACLF,KAAKG,aACP,EACAC,QAAS,CACPC,wBACEL,KAAKJ,OAAS,EACdI,KAAKM,mBACP,EACAC,uBACEP,KAAKJ,OAAS,EACdI,KAAKM,mBACP,EACAA,oBACON,KAAKN,IAAIc,OAOdC,EAAAA,EAAAA,KAAc,2BAA0BT,KAAKJ,SAAUI,KAAKN,KAAKgB,MAAKC,IAChEb,QAAQC,IAAIY,GACK,MAAbA,EAAIC,MACNC,EAAAA,EAAAA,IAAU,CACRC,QAASH,EAAII,IACbC,KAAM,YAEY,QAAbL,EAAIC,MACXC,EAAAA,EAAAA,IAAU,CACRC,QAASH,EAAII,IACbC,KAAM,aAGRH,EAAAA,EAAAA,IAAU,CACRC,QAASH,EAAII,IACbC,KAAM,SAIVhB,KAAKC,MAAM,KAzBfY,EAAAA,EAAAA,IAAU,CACRC,QAAS,QACTE,KAAM,WA0BZ,EAKAC,sBAAsBC,GACpBlB,KAAKN,IAAMwB,EAAIC,KAAIC,GAAKA,EAAEC,KAC1BrB,KAAKL,cAAgBuB,EACrBpB,QAAQC,IAAI,sBAAwBC,KAAKL,cAC3C,EACA2B,aAAaC,GACXzB,QAAQC,IAAI,MAAQwB,EAAI3B,QACxBI,KAAKjC,KAAOgB,KAAKC,MAAMD,KAAKyC,UAAUD,IACtCzB,QAAQC,IAAI,mBAAqBC,KAAKjC,KAAK6B,QAC3C,IACEa,EAAAA,EAAAA,KAAa,yBAAyBT,KAAKjC,MACzC2C,MAAKC,IACLb,QAAQC,IAAIY,GACK,MAAbA,EAAIC,KACmB,IAArBZ,KAAKjC,KAAK6B,QAEZiB,EAAAA,EAAAA,IAAU,CACRC,QAAS,QACTE,KAAM,aAIRH,EAAAA,EAAAA,IAAU,CACRC,QAAS,QACTE,KAAM,aAKVH,EAAAA,EAAAA,IAAU,CACRC,QAASH,EAAII,IACbC,KAAM,SAGV,GAIJ,CAAE,MAAOS,GACP3B,QAAQ2B,MAAMA,EAChB,CACF,EACAC,mBAAmBH,GAEjB,OADAvB,KAAKjC,KAAOgB,KAAKC,MAAMD,KAAKyC,UAAUD,IAC/B,IAAII,SAAQ,CAACC,EAASC,KAC3B,IACuB,GAAdN,EAAI3B,OACL2B,EAAI3B,OAAS,EAEb2B,EAAI3B,OAAS,EAEfgC,GAAQ,EACV,CAAC,MAAOH,GACJI,GAAO,EACZ,IAEP,EACAC,mBAAmBC,GACjBjC,QAAQC,IAAI,aAAagC,EAAKC,OAC9BhC,KAAKjC,KAAKC,SAAW+D,EAAKC,KAC5B,EAEAC,iBAAiBF,GACfjC,QAAQC,IAAI,aAAagC,EAAKC,OAC9BhC,KAAKjC,KAAKE,OAAS8D,EAAKC,KAC1B,EAEAE,6BAA6BC,EAAaC,GACxC,IACEtC,QAAQC,IAAI,yBAA2BC,KAAKT,kBAC5CkB,EAAAA,EAAAA,KAAa,yBAAyB1B,KAAKyC,UAAUxB,KAAKT,mBACxDmB,MAAKC,IACLb,QAAQC,IAAIY,GAEZX,KAAKP,QAAUkB,EAAI7C,KAAKqD,KAAIY,IAAQ,CAAGC,MAAOD,EAAKV,GAAIgB,MAAON,EAAKnE,SACnEkC,QAAQC,IAAI,gBAAkBhB,KAAKyC,UAAUxB,KAAKP,UAClD2C,EAAGpC,KAAKP,QAAQ,GAGpB,CAAE,MAAOgC,GACP3B,QAAQ2B,MAAMA,GACdW,EAAG,GACL,CACF,EACAF,2BAA2BC,EAAaC,GACtC,IACEtC,QAAQC,IAAI,uBAAyBC,KAAKR,gBAC1CiB,EAAAA,EAAAA,KAAa,uBAAuB1B,KAAKyC,UAAUxB,KAAKR,iBACtDkB,MAAKC,IACLb,QAAQC,IAAIY,GAEZX,KAAKP,QAAUkB,EAAI7C,KAAKqD,KAAIY,IAAQ,CAAGC,MAAOD,EAAKV,GAAIgB,MAAON,EAAKnE,SACnEkC,QAAQC,IAAI,gBAAkBhB,KAAKyC,UAAUxB,KAAKP,UAClD2C,EAAGpC,KAAKP,QAAQ,GAGpB,CAAE,MAAOgC,GACP3B,QAAQ2B,MAAMA,GACdW,EAAG,GACL,CACF,EACAE,mBAAmB3B,GACjBX,KAAKjC,KAAKwE,IAAM5B,EAAI7C,KACpBgC,QAAQC,IAAI,iBAAmBC,KAAKjC,KAAKwE,IAC3C,EACAC,MAAMC,GACJ,OAAO,IAAId,SAAQC,GAAWc,WAAWd,EAASa,IACpD,EACAP,sBACE,UAGQlC,KAAKwC,MAAM,KAEjB/B,EAAAA,EAAAA,KAAc,gBACZC,MAAKC,IACLb,QAAQC,IAAIY,GACZX,KAAK5B,WAAauC,EAAI7C,KAAK6E,OAAO,GAEtC,CAAC,MAAOlB,GACN3B,QAAQ2B,MAAMA,EAChB,CAEF,EACAS,oBACE,UAGQlC,KAAKwC,MAAM,KAEjB/B,EAAAA,EAAAA,KAAc,cACZC,MAAKC,IACLb,QAAQC,IAAIY,GACZX,KAAK3B,SAAWsC,EAAI7C,KAAK6E,OAAO,GAEpC,CAAC,MAAOlB,GACN3B,QAAQ2B,MAAMA,EAChB,CAEF,EACAS,aACE,IACElC,KAAK9B,SAAU,QAET8B,KAAKwC,MAAM,KACjB1C,QAAQC,IAAI,mBAAmBC,KAAK7B,YAEpCsC,EAAAA,EAAAA,KAAc,SAAQT,KAAKzB,eAAeyB,KAAKxB,WAAYO,KAAKC,MAAMD,KAAKyC,UAAUxB,KAAK7B,cACxFuC,MAAKC,IACLb,QAAQC,IAAIY,GACZX,KAAKb,UAAYwB,EAAI7C,KAAK6E,QAC1B3C,KAAKvB,MAAQkC,EAAI7C,KAAKW,KAAK,GAE/B,CAAC,MAAOgD,GACN3B,QAAQ2B,MAAMA,EAChB,CAAC,QACCzB,KAAK9B,SAAU,CACjB,CAEF,EAEA0E,QACE5C,KAAK7B,WAAa,CAAC,EACnB6B,KAAK6C,MAAM,mBAAmBC,aAChC,EACAC,mBACE/C,KAAKC,MACP,EACA+C,sBACEhD,KAAKC,MACP,I,+mHCxWJ,MAAMgD,EAAc,EAEpB,O","sources":["webpack://springboot-vue-demo/./src/views/UserStatus.vue","webpack://springboot-vue-demo/./src/views/UserStatus.vue?b1a9"],"sourcesContent":["<template #default=\"scope\">\r\n  <div style=\"padding: 10px;\">\r\n\r\n    <!--功能区域-->\r\n    <div style=\"margin: 10px;padding: 0px\">\r\n      <el-button color=\"#3B455B\">刷新</el-button>\r\n    </div>\r\n    <!--搜索区域-->\r\n    <div style=\"margin: 10px ; padding: 0px\">\r\n      <el-form :inline=\"true\" :model=\"formInline\" class=\"demo-form-inline\" ref=\"resetformInline\">\r\n        <el-form-item label=\"用户名\">\r\n          <el-input v-model=\"formInline.username\" placeholder=\"please input\" clearable/>\r\n        </el-form-item>\r\n        <el-form-item label=\"昵称\">\r\n          <el-input v-model=\"formInline.nickName\" placeholder=\"Please input\"/>\r\n        </el-form-item>\r\n        <el-form-item label=\"状态\">\r\n          <el-select v-model=\"formInline.status\"\r\n                     placeholder=\"Please select\"\r\n                     collapse-tags\r\n                     collapse-tags-tooltip\r\n                     multiple >\r\n            <el-option label=\"启用\" value=\"0\"/>\r\n            <el-option label=\"禁用\" value=\"1\"/>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button color=\"#E0BF75\" style=\"margin-left: 5px\" :icon=\"Search\" @click=\"load\">查询</el-button>\r\n          <el-button color=\"#E0BF75\" style=\"margin-left: 5px\" :icon=\"RefreshLeft\" @click=\"reset\">重置</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <!--批量操作按钮区域-->\r\n    <div style=\"margin: 10px ; padding: 0px\">\r\n      <el-popconfirm title=\"你确定要删除吗，删除之后数据将无法恢复?\"\r\n                     @confirm=\"handleBanUsersStatus\">\r\n        <template #reference>\r\n          <el-button type=\"danger\" >批量禁用</el-button>\r\n        </template>\r\n      </el-popconfirm>\r\n      <el-popconfirm title=\"你确定要删除吗，删除之后数据将无法恢复?\"\r\n                     @confirm=\"handleOpenUsersStatus\">\r\n        <template #reference>\r\n          <el-button type=\"primary\" >批量启用</el-button>\r\n        </template>\r\n      </el-popconfirm>\r\n    </div>\r\n    <!--内容区域-->\r\n    <el-table\r\n        v-loading=\"loading\"\r\n        :data=\"tableData\"\r\n        style=\"width: 100%;\"\r\n        border\r\n        class=\"table\"\r\n        :stripe=\"false\"\r\n        @selection-change=\"handleSelectionChange\"\r\n        fit\r\n    >\r\n      <el-table-column type=\"selection\" width=\"55\"/>\r\n      <el-table-column prop=\"id\" label=\"ID\" sortable/>\r\n      <el-table-column prop=\"username\" label=\"用户名\"/>\r\n      <el-table-column prop=\"nickName\" label=\"昵称\"/>\r\n      <el-table-column\r\n          prop=\"status\"\r\n          label=\"是否启用\"\r\n          align=\"center\"\r\n          sortable=\"custom\"\r\n          show-overflow-tooltip\r\n      >\r\n        <template #default=\"scope\">\r\n          <el-switch\r\n              :model-value=\"scope.row.status\"\r\n              :active-value=\"0\"\r\n              :inactive-value=\"1\"\r\n              size=\"large\"\r\n              class=\"ml-2\"\r\n              inline-prompt\r\n              active-text=\"启用\"\r\n              inactive-text=\"禁用\"\r\n              @change=\"statusChange(scope.row)\"\r\n              :before-change=\"beforeChangeStatus.bind(this, scope.row)\"\r\n              style=\"--el-switch-on-color: #409EFF; --el-switch-off-color: #ff4949\"\r\n          ></el-switch>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"用户角色\" prop=\"role.name\" />\r\n      <el-table-column label=\"部门名称\" prop=\"depart.name\" />\r\n    </el-table>\r\n    <!--分页条-->\r\n    <div style=\"margin: 10px ; padding: 0px\">\r\n      <el-pagination\r\n          v-model:current-page=\"currentPage\"\r\n          v-model:page-size=\"pageSize\"\r\n          :page-sizes=\"[5, 10, 20, 40]\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport {RefreshLeft, Search} from '@element-plus/icons-vue';\r\n</script>\r\n<script>\r\n\r\nimport request from \"@/utils/request\";\r\nimport {ElMessage} from \"element-plus\";\r\n\r\nexport default {\r\n  name: 'UserStatus',\r\n  components: {},\r\n  data() {\r\n    return {\r\n      form: {\r\n        departId: '', // 初始值为空字符串\r\n        roleId: '' // 初始值为空字符串\r\n      },\r\n      loading: false,\r\n      formInline: {},\r\n      departList:[],\r\n      roleList:[],\r\n      search: '',\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      // 新增数据的对话框显示控制\r\n      dialogVisible: false,\r\n      importData:{imporType:1},\r\n      headers:{\r\n        token: JSON.parse(sessionStorage.getItem('token'))\r\n      },\r\n\r\n      tableData: [],\r\n      filesUploadUrl:\"http://\" + window.server.filesUploadUrl + \":9090/files/uploadUserIcons\",\r\n      departInputValue: '',\r\n      roleInputValue: '',\r\n      options: [],\r\n      ids: [],\r\n      selectedFiles: [],\r\n      status:-1,\r\n\r\n    }\r\n  },\r\n  created() {\r\n    console.log(this.headers);\r\n    this.load();\r\n    this.getDepartList();\r\n    this.getRoleList();\r\n  },\r\n  methods: {\r\n    handleOpenUsersStatus(){\r\n      this.status = 0;\r\n      this.handleUsersStatus();\r\n    },\r\n    handleBanUsersStatus(){\r\n      this.status = 1;\r\n      this.handleUsersStatus();\r\n    },\r\n    handleUsersStatus() {\r\n      if (!this.ids.length) {\r\n        ElMessage({\r\n          message: '请选择数据',\r\n          type: 'warning',\r\n        })\r\n        return\r\n      }\r\n      request.post(`/user/handleUsersStatus/${this.status}`, this.ids).then(res => {\r\n            console.log(res);\r\n            if (res.code === '0') {\r\n              ElMessage({\r\n                message: res.msg,\r\n                type: 'success',\r\n              });\r\n            }else if(res.code === '101'){\r\n              ElMessage({\r\n                message: res.msg,\r\n                type: 'warning',\r\n              })\r\n            } else {\r\n              ElMessage({\r\n                message: res.msg,\r\n                type: 'info',\r\n                //\r\n              })\r\n            }\r\n            this.load();\r\n          }\r\n      )\r\n    },\r\n\r\n\r\n\r\n    //多选栏选择变化\r\n    handleSelectionChange(val) {\r\n      this.ids = val.map(v => v.id)\r\n      this.selectedFiles = val\r\n      console.log(\"this.selectedFiles:\" + this.selectedFiles)\r\n    },\r\n    statusChange(row){\r\n      console.log(\"row\" + row.status);\r\n      this.form = JSON.parse(JSON.stringify(row));\r\n      console.log(\"this.form.status\" + this.form.status);\r\n      try {\r\n        request.post(\"/user/updateUserstatus\",this.form\r\n        ).then(res => {\r\n          console.log(res);\r\n          if (res.code === '0') {\r\n            if (this.form.status === 1){\r\n              //表示用户想要作废文件\r\n              ElMessage({\r\n                message: '用户已禁用',\r\n                type: 'warning',\r\n              })\r\n            }else{\r\n              //表示用户想要启用文件\r\n              ElMessage({\r\n                message: '用户已启用',\r\n                type: 'success',\r\n              })\r\n            }\r\n          }else{\r\n\r\n            ElMessage({\r\n              message: res.msg,\r\n              type: 'error',\r\n\r\n            })\r\n          }\r\n\r\n\r\n        })\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    },\r\n    beforeChangeStatus(row) {\r\n      this.form = JSON.parse(JSON.stringify(row));\r\n      return new Promise((resolve, reject) => {\r\n        try {\r\n              if(row.status == 0){\r\n                row.status = 1\r\n              }else{\r\n                row.status = 0\r\n              }\r\n              resolve(true)\r\n            }catch (error) {\r\n                reject(false)\r\n           }\r\n      })\r\n    },\r\n    handleDepartSelect(item){\r\n      console.log(\"item.value\"+item.value)  // 获取选中项的 value 值\r\n      this.form.departId = item.value  // 将选中项的 value 赋值给其它变量\r\n    },\r\n\r\n    handleRoleSelect(item){\r\n      console.log(\"item.value\"+item.value)  // 获取选中项的 value 值\r\n      this.form.roleId = item.value  // 将选中项的 value 赋值给其它变量\r\n    },\r\n\r\n    async queryDepartSearchAsync(queryString, cb) {\r\n      try {\r\n        console.log(\"this.departInputValue:\" + this.departInputValue)\r\n        request.post(\"/depart/findListByName\",JSON.stringify(this.departInputValue)\r\n        ).then(res => {\r\n          console.log(res);\r\n          // 将查询结果作为选项返回给组件\r\n          this.options = res.data.map(item => ({ value: item.id, label: item.name }))\r\n          console.log(\"this.options:\" + JSON.stringify(this.options) )\r\n          cb(this.options)\r\n        })\r\n\r\n      } catch (error) {\r\n        console.error(error)\r\n        cb([])\r\n      }\r\n    },\r\n    async queryRoleSearchAsync(queryString, cb) {\r\n      try {\r\n        console.log(\"this.roleInputValue:\" + this.roleInputValue)\r\n        request.post(\"/role/findListByName\",JSON.stringify(this.roleInputValue)\r\n        ).then(res => {\r\n          console.log(res);\r\n          // 将查询结果作为选项返回给组件\r\n          this.options = res.data.map(item => ({ value: item.id, label: item.name }))\r\n          console.log(\"this.options:\" + JSON.stringify(this.options) )\r\n          cb(this.options)\r\n        })\r\n\r\n      } catch (error) {\r\n        console.error(error)\r\n        cb([])\r\n      }\r\n    },\r\n    filesUploadSuccess(res){\r\n      this.form.img = res.data;\r\n      console.log(\"this.form.img:\" + this.form.img)\r\n    },\r\n    delay(time) {\r\n      return new Promise(resolve => setTimeout(resolve, time));\r\n    },\r\n    async getDepartList() {\r\n      try {\r\n\r\n        //延迟执行\r\n        await this.delay(1000);\r\n        //此处设置先按10个查\r\n        request.post(`/depart/1/10`\r\n        ).then(res => {\r\n          console.log(res);\r\n          this.departList = res.data.records;\r\n        })\r\n      }catch (error){\r\n        console.error(error)\r\n      }\r\n\r\n    },\r\n    async getRoleList() {\r\n      try {\r\n\r\n        //延迟执行\r\n        await this.delay(1000);\r\n        //此处设置先按10个查\r\n        request.post(`/role/1/10`\r\n        ).then(res => {\r\n          console.log(res);\r\n          this.roleList = res.data.records;\r\n        })\r\n      }catch (error){\r\n        console.error(error)\r\n      }\r\n\r\n    },\r\n    async load() {\r\n      try {\r\n        this.loading = true; // 显示Loading遮罩\r\n        //延迟执行\r\n        await this.delay(1000);\r\n        console.log(\"this.formInline:\"+this.formInline);\r\n        // const url = \"/user/\" + this.currentPage + \"/\" + this.pageSize;\r\n        request.post(`/user/${this.currentPage}/${this.pageSize}`, JSON.parse(JSON.stringify(this.formInline))\r\n        ).then(res => {\r\n          console.log(res);\r\n          this.tableData = res.data.records;\r\n          this.total = res.data.total;\r\n        })\r\n      }catch (error){\r\n        console.error(error)\r\n      }finally {\r\n        this.loading = false; // 隐藏Loading遮罩\r\n      }\r\n\r\n    },\r\n\r\n    reset() {\r\n      this.formInline = {};\r\n      this.$refs[\"resetformInline\"].resetFields();\r\n    },\r\n    handleSizeChange() {\r\n      this.load()\r\n    },\r\n    handleCurrentChange() {\r\n      this.load()\r\n    },\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.table tbody tr:nth-child(odd) {\r\n  background-color: #F5F5F5;\r\n}\r\n\r\n.table tbody tr:nth-child(even) {\r\n  background-color: #8A77A5;\r\n}\r\n\r\n.el-table_3_column_12 .cell {\r\n  background-color: #F5F5F5;\r\n}\r\n\r\n.el-table_3_column_12 .cell.highlight {\r\n  background-color: #8A77A5;\r\n}\r\n</style>\r\n","import script from \"./UserStatus.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./UserStatus.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./UserStatus.vue?vue&type=style&index=0&id=4f1e3697&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["__default__","name","components","data","form","departId","roleId","loading","formInline","departList","roleList","search","currentPage","pageSize","total","dialogVisible","importData","imporType","headers","token","JSON","parse","sessionStorage","getItem","tableData","filesUploadUrl","window","server","departInputValue","roleInputValue","options","ids","selectedFiles","status","created","console","log","this","load","getDepartList","getRoleList","methods","handleOpenUsersStatus","handleUsersStatus","handleBanUsersStatus","length","request","then","res","code","ElMessage","message","msg","type","handleSelectionChange","val","map","v","id","statusChange","row","stringify","error","beforeChangeStatus","Promise","resolve","reject","handleDepartSelect","item","value","handleRoleSelect","async","queryString","cb","label","filesUploadSuccess","img","delay","time","setTimeout","records","reset","$refs","resetFields","handleSizeChange","handleCurrentChange","__exports__"],"sourceRoot":""}