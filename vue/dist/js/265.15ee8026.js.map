{"version":3,"file":"js/265.15ee8026.js","mappings":"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","sources":["webpack://springboot-vue-demo/./src/views/User.vue","webpack://springboot-vue-demo/./src/views/User.vue?703e"],"sourcesContent":["<template #default=\"scope\">\n  <div style=\"padding: 10px;\">\n\n    <!--功能区域-->\n    <div style=\"margin: 10px;padding: 0px\">\n      <el-button color=\"#3B455B\" @click=\"add\">新增</el-button>\n      <el-button color=\"#3B455B\">导入</el-button>\n      <el-button color=\"#3B455B\">导出</el-button>\n      <el-button color=\"#3B455B\">刷新</el-button>\n    </div>\n    <!--搜索区域-->\n    <div style=\"margin: 10px ; padding: 0px\">\n      <el-form :inline=\"true\" :model=\"formInline\" class=\"demo-form-inline\" ref=\"resetformInline\">\n        <el-form-item label=\"用户名\">\n          <el-input v-model=\"formInline.username\" placeholder=\"please input\" clearable/>\n        </el-form-item>\n        <el-form-item label=\"昵称\">\n          <el-input v-model=\"formInline.nickName\" placeholder=\"Please input\"/>\n        </el-form-item>\n        <el-form-item>\n          <el-button color=\"#E0BF75\" style=\"margin-left: 5px\" :icon=\"Search\" @click=\"load\">查询</el-button>\n          <el-button color=\"#E0BF75\" style=\"margin-left: 5px\" :icon=\"RefreshLeft\" @click=\"reset\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n    <!--内容区域-->\n    <el-table\n        v-loading=\"loading\"\n        :data=\"tableData\"\n        style=\"width: 100%;\"\n        border\n        class=\"table\"\n        :stripe=\"false\"\n        fit\n    >\n      <el-table-column prop=\"id\" label=\"ID\" sortable/>\n      <el-table-column prop=\"username\" label=\"用户名\"/>\n      <el-table-column prop=\"nickName\" label=\"昵称\"/>\n      <!--<el-table-column  label=\"角色\">-->\n      <!--  <template #default=\"scope\">-->\n      <!--    <span v-if=\"scope.row.roleId === 1\">管理员</span>-->\n      <!--    <span v-if=\"scope.row.roleId === 2\">设计人员</span>-->\n      <!--    <span v-if=\"scope.row.roleId === 3\">其他人员</span>-->\n      <!--  </template>-->\n      <!--</el-table-column>-->\n      <el-table-column label=\"用户角色\" prop=\"role.name\" />\n      <el-table-column label=\"部门名称\" prop=\"depart.name\" />\n      <el-table-column  label=\"头像\">\n        <template #default=\"scope\">\n          <el-image\n              style=\"width: 50px; height: 50px\"\n              :src=\"scope.row.img || '/static/default.png'\"\n              :preview-src-list=\"[scope.row.img]\"\n              preview-teleported=\"preview-teleported\"\n          />\n        </template>\n      </el-table-column>\n      <el-table-column fixed=\"right\" label=\"操作\" width=\"190\">\n        <template #default=\"scope\">\n          <div class=\"btn-group\">\n            <div class=\"col\">\n              <el-button size=\"small\" @click=\"handleEdit(scope.row)\"\n              >编辑\n              </el-button\n              >\n              <el-popconfirm title=\"你确定要删除用户吗?\" @confirm=\"handleDelete(scope.row.id)\">\n                <template #reference>\n                  <el-button type=\"danger\" size=\"small\">删除</el-button>\n                </template>\n              </el-popconfirm>\n              <el-popconfirm title=\"重置密码后，账号原密码将会失效，确定重置?\" @confirm=\"handleResetPassword(scope.row.id)\">\n                <template #reference>\n                  <el-button type=\"warning\" size=\"small\">重置</el-button>\n                </template>\n              </el-popconfirm>\n            </div>\n          </div>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!--分页条-->\n    <div style=\"margin: 10px ; padding: 0px\">\n      <el-pagination\n          v-model:current-page=\"currentPage\"\n          v-model:page-size=\"pageSize\"\n          :page-sizes=\"[5, 10, 20, 40]\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n      />\n    </div>\n    <!--  新增对话框 -->\n    <el-dialog v-model=\"dialogVisible\" title=\"Tips\" width=\"30%\">\n      <el-form :model=\"form\" label-width=\"120px\">\n        <el-form-item label=\"用户名\">\n          <el-input v-model=\"form.username\" style=\"width: 80%\"/>\n        </el-form-item>\n        <el-form-item label=\"昵称\">\n          <el-input v-model=\"form.nickName\" style=\"width: 80%\"/>\n        </el-form-item>\n        <el-form-item label=\"角色类型\" prop=\"RoleId\">\n          <el-autocomplete\n              v-model=\"roleInputValue\"\n              :fetch-suggestions=\"queryRoleSearchAsync\"\n              :popper-append-to-body=\"true\"\n              :placeholder=\"'请输入内容'\"\n              :trigger-on-focus=\"true\"\n              :value-key=\"'label'\"\n              @select=\"handleRoleSelect\"\n          ></el-autocomplete>\n        </el-form-item>\n        <el-form-item label=\"部门名称\" prop=\"departId\">\n          <el-autocomplete\n              v-model=\"departInputValue\"\n              :fetch-suggestions=\"queryDepartSearchAsync\"\n              :popper-append-to-body=\"true\"\n              :placeholder=\"'请输入内容'\"\n              :trigger-on-focus=\"true\"\n              :value-key=\"'label'\"\n              @select=\"handleDepartSelect\"\n          ></el-autocomplete>\n        </el-form-item>\n        <el-form-item label=\"头像\">\n          <el-upload ref=\"upload\" :action=\"filesUploadUrl\"\n                     :headers=\"headers\"\n                     :data=\"importData\"\n                     :on-success=\"filesUploadSuccess\">\n            <el-button type=\"primary\">Click to upload</el-button>\n            <template #tip>\n              <div class=\"el-upload__tip\">\n                jpg/png files with a size less than 500KB.\n              </div>\n            </template>\n          </el-upload>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">Cancel</el-button>\n        <el-button type=\"primary\" @click=\"save\">\n          Confirm\n        </el-button>\n      </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n<script setup>\nimport {RefreshLeft, Search} from '@element-plus/icons-vue';\n</script>\n<script>\n\nimport request from \"@/utils/request\";\nimport {ElMessage} from \"element-plus\";\n\nexport default {\n  name: 'User',\n  components: {},\n  data() {\n    return {\n      form: {\n        departId: '', // 初始值为空字符串\n        roleId: '' // 初始值为空字符串\n      },\n      loading: false,\n      formInline: {},\n      departList:[],\n      roleList:[],\n      search: '',\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      // 新增数据的对话框显示控制\n      dialogVisible: false,\n      importData:{imporType:1},\n      headers:{\n        token: JSON.parse(sessionStorage.getItem('token'))\n      },\n\n      tableData: [],\n      filesUploadUrl:\"http://\" + window.server.filesUploadUrl + \":9090/files/uploadUserIcons\",\n      departInputValue: '',\n      roleInputValue: '',\n      options: []\n    }\n  },\n  created() {\n    console.log(this.headers);\n    this.load();\n    this.getDepartList();\n    this.getRoleList();\n  },\n  methods: {\n\n    handleDepartSelect(item){\n      console.log(\"item.value\"+item.value)  // 获取选中项的 value 值\n      this.form.departId = item.value  // 将选中项的 value 赋值给其它变量\n    },\n\n    handleRoleSelect(item){\n      console.log(\"item.value\"+item.value)  // 获取选中项的 value 值\n      this.form.roleId = item.value  // 将选中项的 value 赋值给其它变量\n    },\n\n    async queryDepartSearchAsync(queryString, cb) {\n      try {\n        console.log(\"this.departInputValue:\" + this.departInputValue)\n        request.post(\"/depart/findListByName\",JSON.stringify(this.departInputValue)\n        ).then(res => {\n          console.log(res);\n          // 将查询结果作为选项返回给组件\n          this.options = res.data.map(item => ({ value: item.id, label: item.name }))\n          console.log(\"this.options:\" + JSON.stringify(this.options) )\n          cb(this.options)\n        })\n\n      } catch (error) {\n        console.error(error)\n        cb([])\n      }\n    },\n    async queryRoleSearchAsync(queryString, cb) {\n      try {\n        console.log(\"this.roleInputValue:\" + this.roleInputValue)\n        request.post(\"/role/findListByName\",JSON.stringify(this.roleInputValue)\n        ).then(res => {\n          console.log(res);\n          // 将查询结果作为选项返回给组件\n          this.options = res.data.map(item => ({ value: item.id, label: item.name }))\n          console.log(\"this.options:\" + JSON.stringify(this.options) )\n          cb(this.options)\n        })\n\n      } catch (error) {\n        console.error(error)\n        cb([])\n      }\n    },\n    filesUploadSuccess(res){\n      this.form.img = res.data;\n      console.log(\"this.form.img:\" + this.form.img)\n    },\n    delay(time) {\n      return new Promise(resolve => setTimeout(resolve, time));\n    },\n    async getDepartList() {\n      try {\n\n        //延迟执行\n        await this.delay(1000);\n        //此处设置先按10个查\n        request.post(`/depart/1/10`\n        ).then(res => {\n          console.log(res);\n          this.departList = res.data.records;\n        })\n      }catch (error){\n        console.error(error)\n      }\n\n    },\n    async getRoleList() {\n      try {\n\n        //延迟执行\n        await this.delay(1000);\n        //此处设置先按10个查\n        request.post(`/role/1/10`\n        ).then(res => {\n          console.log(res);\n          this.roleList = res.data.records;\n        })\n      }catch (error){\n        console.error(error)\n      }\n\n    },\n    async load() {\n      try {\n        this.loading = true; // 显示Loading遮罩\n        //延迟执行\n        await this.delay(1000);\n        console.log(\"this.formInline:\"+this.formInline);\n        // const url = \"/user/\" + this.currentPage + \"/\" + this.pageSize;\n        request.post(`/user/${this.currentPage}/${this.pageSize}`, JSON.parse(JSON.stringify(this.formInline))\n        ).then(res => {\n          console.log(res);\n          this.tableData = res.data.records;\n          this.total = res.data.total;\n        })\n      }catch (error){\n        console.error(error)\n      }finally {\n        this.loading = false; // 隐藏Loading遮罩\n      }\n\n    },\n    // load(){\n    //   request.get(\"/user\",{\n    //     params:{\n    //       index:this.currentPage,\n    //       size:this.pageSize,\n    //       search:this.formInline.nickName\n    //     }\n    //   }).then(res => {\n    //     console.log(res);\n    //     this.tableData = res.data.records;\n    //     this.total = res.data.total;\n    //   })\n    // },\n\n    reset() {\n      this.formInline = {};\n      this.$refs[\"resetformInline\"].resetFields();\n    },\n    add() {\n      let _this = this;\n      _this.dialogVisible = true;\n      _this.form = {};\n      this.load();//更新表单数据\n      this.$nextTick(()=>{\n        this.$refs[\"upload\"].clearFiles();\n      })\n    },\n    save() {\n      //此处需要先对用户选择的部门信息进行\n      //更新\n      if (this.form.id) {\n        request.put(\"/user\", this.form).then(res => {\n          console.log(res);\n          if (res.code === '0') {\n            ElMessage({\n              message: '修改成功',\n              type: 'success',\n            })\n          } else {\n            ElMessage({\n              message: '修改失败',\n              type: 'error',\n            })\n          }\n        });\n\n\n      } else {\n        //新增\n        request.post(\"/user\", this.form).then(res => {\n          console.log(res);\n          if (res.code === '0') {\n            ElMessage({\n              message: res.msg,\n              type: 'success',\n            })\n          } else {\n            ElMessage({\n              message: res.msg,\n              type: 'error',\n            })\n          }\n        });\n\n      }\n\n      this.dialogVisible = false;//关闭弹窗\n      this.load();//更新表单数据\n    },\n    handleEdit(row) {\n      this.form = JSON.parse(JSON.stringify(row));\n      this.dialogVisible = true;\n      this.$nextTick(()=>{\n        this.$refs[\"upload\"].clearFiles();\n      })\n    },\n    handleSizeChange() {\n      this.load()\n    },\n    handleCurrentChange() {\n      this.load()\n    },\n    handleDelete(id) {\n      console.log(id)\n      request.delete(\"/user/\" + id).then(res => {\n        console.log(res);\n        if (res.code === '0') {\n          ElMessage({\n            message: '删除成功',\n            type: 'success',\n          })\n        } else {\n          ElMessage({\n            message: '删除失败',\n            type: 'error',\n          })\n        }\n        this.load();\n      });\n    },\n    handleResetPassword(id) {\n      console.log(id)\n      request.get(\"/user/resetPassword/\" + id).then(res => {\n        console.log(res);\n        if (res.code === '0') {\n          ElMessage({\n            message: '删除成功',\n            type: 'success',\n          })\n        } else {\n          ElMessage({\n            message: '删除失败',\n            type: 'error',\n          })\n        }\n        this.load();\n      });\n    },\n  }\n}\n</script>\n<style>\n.table tbody tr:nth-child(odd) {\n  background-color: #F5F5F5;\n}\n\n.table tbody tr:nth-child(even) {\n  background-color: #8A77A5;\n}\n\n.el-table_3_column_12 .cell {\n  background-color: #F5F5F5;\n}\n\n.el-table_3_column_12 .cell.highlight {\n  background-color: #8A77A5;\n}\n</style>\n","import script from \"./User.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./User.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./User.vue?vue&type=style&index=0&id=2425d1a3&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["__default__","name","components","data","form","departId","roleId","loading","formInline","departList","roleList","search","currentPage","pageSize","total","dialogVisible","importData","imporType","headers","token","JSON","parse","sessionStorage","getItem","tableData","filesUploadUrl","window","server","departInputValue","roleInputValue","options","created","console","log","this","load","getDepartList","getRoleList","methods","handleDepartSelect","item","value","handleRoleSelect","async","queryString","cb","request","stringify","then","res","map","id","label","error","filesUploadSuccess","img","delay","time","Promise","resolve","setTimeout","records","reset","$refs","resetFields","add","_this","$nextTick","clearFiles","save","code","ElMessage","message","type","msg","handleEdit","row","handleSizeChange","handleCurrentChange","handleDelete","handleResetPassword","__exports__"],"sourceRoot":""}