(self["webpackChunkspringboot_vue_demo"]=self["webpackChunkspringboot_vue_demo"]||[]).push([[363],{82174:function(e,t,o){"use strict";var n=o(66252),a=(0,n.aZ)({name:"UserFilled"});const i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},r=(0,n.Wm)("path",{fill:"currentColor",d:"M288 320a224 224 0 1 0 448 0 224 224 0 1 0-448 0zm544 608H160a32 32 0 0 1-32-32v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 0 1-32 32z"},null,-1);function s(e,t,o,a,s,l){return(0,n.wg)(),(0,n.j4)("svg",i,[r])}a.render=s,a.__file="packages/components/UserFilled.vue",t["Z"]=a},20903:function(e,t,o){"use strict";var n=o(29812),a=n.defineComponent({name:"Lock"});const i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},r=n.createVNode("path",{fill:"currentColor",d:"M224 448a32 32 0 0 0-32 32v384a32 32 0 0 0 32 32h576a32 32 0 0 0 32-32V480a32 32 0 0 0-32-32H224zm0-64h576a96 96 0 0 1 96 96v384a96 96 0 0 1-96 96H224a96 96 0 0 1-96-96V480a96 96 0 0 1 96-96z"},null,-1),s=n.createVNode("path",{fill:"currentColor",d:"M512 544a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V576a32 32 0 0 1 32-32zm192-160v-64a192 192 0 1 0-384 0v64h384zM512 64a256 256 0 0 1 256 256v128H256V320A256 256 0 0 1 512 64z"},null,-1);function l(e,t,o,a,l,u){return n.openBlock(),n.createBlock("svg",i,[r,s])}a.render=l,a.__file="packages/components/Lock.vue",t.Z=a},19575:function(e,t,o){(function(t,o){e.exports=o()})("undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof o.g&&o.g,(function(){"use strict";var e="3.7.5",t=e,o="function"===typeof atob,n="function"===typeof btoa,a="function"===typeof Buffer,i="function"===typeof TextDecoder?new TextDecoder:void 0,r="function"===typeof TextEncoder?new TextEncoder:void 0,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=Array.prototype.slice.call(s),u=function(e){var t={};return e.forEach((function(e,o){return t[e]=o})),t}(l),c=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,d=String.fromCharCode.bind(String),h="function"===typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(e){return new Uint8Array(Array.prototype.slice.call(e,0))},f=function(e){return e.replace(/=/g,"").replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"}))},g=function(e){return e.replace(/[^A-Za-z0-9\+\/]/g,"")},p=function(e){for(var t,o,n,a,i="",r=e.length%3,s=0;s<e.length;){if((o=e.charCodeAt(s++))>255||(n=e.charCodeAt(s++))>255||(a=e.charCodeAt(s++))>255)throw new TypeError("invalid character found");t=o<<16|n<<8|a,i+=l[t>>18&63]+l[t>>12&63]+l[t>>6&63]+l[63&t]}return r?i.slice(0,r-3)+"===".substring(r):i},v=n?function(e){return btoa(e)}:a?function(e){return Buffer.from(e,"binary").toString("base64")}:p,m=a?function(e){return Buffer.from(e).toString("base64")}:function(e){for(var t=4096,o=[],n=0,a=e.length;n<a;n+=t)o.push(d.apply(null,e.subarray(n,n+t)));return v(o.join(""))},b=function(e,t){return void 0===t&&(t=!1),t?f(m(e)):m(e)},x=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?d(192|t>>>6)+d(128|63&t):d(224|t>>>12&15)+d(128|t>>>6&63)+d(128|63&t)}t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return d(240|t>>>18&7)+d(128|t>>>12&63)+d(128|t>>>6&63)+d(128|63&t)},w=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,_=function(e){return e.replace(w,x)},y=a?function(e){return Buffer.from(e,"utf8").toString("base64")}:r?function(e){return m(r.encode(e))}:function(e){return v(_(e))},C=function(e,t){return void 0===t&&(t=!1),t?f(y(e)):y(e)},S=function(e){return C(e,!0)},A=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,k=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),o=t-65536;return d(55296+(o>>>10))+d(56320+(1023&o));case 3:return d((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return d((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},B=function(e){return e.replace(A,k)},z=function(e){if(e=e.replace(/\s+/g,""),!c.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));for(var t,o,n,a="",i=0;i<e.length;)t=u[e.charAt(i++)]<<18|u[e.charAt(i++)]<<12|(o=u[e.charAt(i++)])<<6|(n=u[e.charAt(i++)]),a+=64===o?d(t>>16&255):64===n?d(t>>16&255,t>>8&255):d(t>>16&255,t>>8&255,255&t);return a},T=o?function(e){return atob(g(e))}:a?function(e){return Buffer.from(e,"base64").toString("binary")}:z,X=a?function(e){return h(Buffer.from(e,"base64"))}:function(e){return h(T(e).split("").map((function(e){return e.charCodeAt(0)})))},Y=function(e){return X(F(e))},U=a?function(e){return Buffer.from(e,"base64").toString("utf8")}:i?function(e){return i.decode(X(e))}:function(e){return B(T(e))},F=function(e){return g(e.replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})))},M=function(e){return U(F(e))},W=function(e){if("string"!==typeof e)return!1;var t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},H=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}},L=function(){var e=function(e,t){return Object.defineProperty(String.prototype,e,H(t))};e("fromBase64",(function(){return M(this)})),e("toBase64",(function(e){return C(this,e)})),e("toBase64URI",(function(){return C(this,!0)})),e("toBase64URL",(function(){return C(this,!0)})),e("toUint8Array",(function(){return Y(this)}))},D=function(){var e=function(e,t){return Object.defineProperty(Uint8Array.prototype,e,H(t))};e("toBase64",(function(e){return b(this,e)})),e("toBase64URI",(function(){return b(this,!0)})),e("toBase64URL",(function(){return b(this,!0)}))},E=function(){L(),D()},R={version:e,VERSION:t,atob:T,atobPolyfill:z,btoa:v,btoaPolyfill:p,fromBase64:M,toBase64:C,encode:C,encodeURI:S,encodeURL:S,utob:_,btou:B,decode:M,isValid:W,fromUint8Array:b,toUint8Array:Y,extendString:L,extendUint8Array:D,extendBuiltins:E,Base64:{}};return Object.keys(R).forEach((function(e){return R.Base64[e]=R[e]})),R}))},40363:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return U}});var n=o(66252),a=o(3577);const i={style:{width:"100%",height:"100vh","background-image":"linear-gradient(to right, #3B455B, #5d5070)",overflow:"hidden"}},r={style:{width:"400px",margin:"150px auto"}},s={style:{color:"#cccccc","font-size":"30px","text-align":"center"}};function l(e,t,o,l,u,c){const d=(0,n.up)("el-input"),h=(0,n.up)("el-form-item"),f=(0,n.up)("el-checkbox"),g=(0,n.up)("Vcode"),p=(0,n.up)("el-button"),v=(0,n.up)("el-button-group"),m=(0,n.up)("el-form"),b=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.iD)("div",i,[(0,n._)("div",r,[(0,n._)("div",s,(0,a.zw)(e.$t("login.title")),1),(0,n.wy)(((0,n.wg)(),(0,n.j4)(m,{ref:"form",rules:u.rules,model:u.form,size:"default","element-loading-text":"Loading...","element-loading-spinner":u.svg,"element-loading-svg-view-box":"-10, -10, 50, 50","element-loading-background":"rgba(122, 122, 122, 0.8)"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{prop:"username"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{placeholder:e.$t("login.username"),"prefix-icon":c.UserFilled,modelValue:u.form.username,"onUpdate:modelValue":t[0]||(t[0]=e=>u.form.username=e)},null,8,["placeholder","prefix-icon","modelValue"])])),_:1}),(0,n.Wm)(h,{prop:"password"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{placeholder:e.$t("login.password"),"prefix-icon":c.lock,modelValue:u.form.password,"onUpdate:modelValue":t[1]||(t[1]=e=>u.form.password=e),"show-password":""},null,8,["placeholder","prefix-icon","modelValue"])])),_:1}),(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,{modelValue:u.checked,"onUpdate:modelValue":t[2]||(t[2]=e=>u.checked=e)},{default:(0,n.w5)((()=>[(0,n.Uk)("记住我")])),_:1},8,["modelValue"])])),_:1}),(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(g,{show:u.isShow,onSuccess:c.onSuccess,onClose:c.onClose,onFail:c.onfail},null,8,["show","onSuccess","onClose","onFail"]),(0,n.Wm)(p,{style:{width:"100%"},type:"primary",onClick:c.submitForm},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.$t("login.submit")),1)])),_:1},8,["onClick"])])),_:1}),(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{class:(0,a.C_)({active:"中文"===c.currentLanguage}),onClick:t[3]||(t[3]=e=>c.switchLanguage("zh-CN")),text:""},{default:(0,n.w5)((()=>[(0,n.Uk)(" 中文 ")])),_:1},8,["class"]),(0,n.Wm)(p,{class:(0,a.C_)({active:"English"===c.currentLanguage}),onClick:t[4]||(t[4]=e=>c.switchLanguage("en-US")),text:""},{default:(0,n.w5)((()=>[(0,n.Uk)(" English ")])),_:1},8,["class"])])),_:1})])),_:1})])),_:1},8,["rules","model","element-loading-spinner"])),[[b,u.loading]])])])}o(57658);var u=o(82174),c=o(20903),d=o(84471),h=o(81348),f=o(2262),g=o(49963);(function(){try{var e=document.createElement("style");e.appendChild(document.createTextNode(".vue-puzzle-vcode{position:fixed;top:0;left:0;bottom:0;right:0;background-color:#0000004d;z-index:999;opacity:0;pointer-events:none;transition:opacity .2s}.vue-puzzle-vcode.show_{opacity:1;pointer-events:auto}.vue-auth-box_{position:absolute;top:40%;left:50%;transform:translate(-50%,-50%);padding:20px;background:#fff;user-select:none;border-radius:3px;box-shadow:0 1px 3px #0000004d}.vue-auth-box_ .auth-body_{position:relative;overflow:hidden;border-radius:3px}.vue-auth-box_ .auth-body_ .loading-box_{position:absolute;top:0;left:0;bottom:0;right:0;background-color:#000c;z-index:20;opacity:1;transition:opacity .1s;display:flex;align-items:center;justify-content:center}.vue-auth-box_ .auth-body_ .loading-box_.hide_{opacity:0;pointer-events:none}.vue-auth-box_ .auth-body_ .loading-box_.hide_ .loading-gif_ span{animation-play-state:paused}.vue-auth-box_ .auth-body_ .loading-box_ .loading-gif_{flex:none;height:5px;line-height:0}@keyframes load{0%{opacity:1;transform:scale(1.3)}to{opacity:.2;transform:scale(.3)}}.vue-auth-box_ .auth-body_ .loading-box_ .loading-gif_ span{display:inline-block;width:5px;height:100%;margin-left:2px;border-radius:50%;background-color:#888;animation:load 1.04s ease infinite}.vue-auth-box_ .auth-body_ .loading-box_ .loading-gif_ span:nth-child(1){margin-left:0}.vue-auth-box_ .auth-body_ .loading-box_ .loading-gif_ span:nth-child(2){animation-delay:.13s}.vue-auth-box_ .auth-body_ .loading-box_ .loading-gif_ span:nth-child(3){animation-delay:.26s}.vue-auth-box_ .auth-body_ .loading-box_ .loading-gif_ span:nth-child(4){animation-delay:.39s}.vue-auth-box_ .auth-body_ .loading-box_ .loading-gif_ span:nth-child(5){animation-delay:.52s}.vue-auth-box_ .auth-body_ .info-box_{position:absolute;bottom:0;left:0;width:100%;height:24px;line-height:24px;text-align:center;overflow:hidden;font-size:13px;background-color:#83ce3f;opacity:0;transform:translateY(24px);transition:all .2s;color:#fff;z-index:10}.vue-auth-box_ .auth-body_ .info-box_.show{opacity:.95;transform:translateY(0)}.vue-auth-box_ .auth-body_ .info-box_.fail{background-color:#ce594b}.vue-auth-box_ .auth-body_ .auth-canvas2_{position:absolute;top:0;left:0;width:60px;height:100%;z-index:2}.vue-auth-box_ .auth-body_ .auth-canvas3_{position:absolute;top:0;left:0;opacity:0;transition:opacity .6s;z-index:3}.vue-auth-box_ .auth-body_ .auth-canvas3_.show{opacity:1}.vue-auth-box_ .auth-body_ .flash_{position:absolute;top:0;left:0;width:30px;height:100%;background-color:#ffffff1a;z-index:3}.vue-auth-box_ .auth-body_ .flash_.show{transition:transform .6s}.vue-auth-box_ .auth-body_ .reset_{position:absolute;top:2px;right:2px;width:35px;height:auto;z-index:12;cursor:pointer;transition:transform .2s;transform:rotate(0)}.vue-auth-box_ .auth-body_ .reset_:hover{transform:rotate(-90deg)}.vue-auth-box_ .auth-control_ .range-box{position:relative;width:100%;background-color:#eef1f8;margin-top:20px;border-radius:3px;box-shadow:0 0 8px #f0f0f099 inset}.vue-auth-box_ .auth-control_ .range-box .range-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:14px;color:#b7bcd1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center;width:100%}.vue-auth-box_ .auth-control_ .range-box .range-slider{position:absolute;height:100%;width:50px;background-color:#6aa0ffcc;border-radius:3px}.vue-auth-box_ .auth-control_ .range-box .range-slider .range-btn{position:absolute;display:flex;align-items:center;justify-content:center;right:0;width:50px;height:100%;background-color:#fff;border-radius:3px;box-shadow:0 0 4px #ccc;cursor:pointer}.vue-auth-box_ .auth-control_ .range-box .range-slider .range-btn>div{width:0;height:40%;transition:all .2s;border:solid 1px #6aa0ff}.vue-auth-box_ .auth-control_ .range-box .range-slider .range-btn>div:nth-child(2){margin:0 4px}.vue-auth-box_ .auth-control_ .range-box .range-slider .range-btn:hover>div:first-child,.vue-auth-box_ .auth-control_ .range-box .range-slider .range-btn.isDown>div:first-child{border:solid 4px transparent;height:0;border-right-color:#6aa0ff}.vue-auth-box_ .auth-control_ .range-box .range-slider .range-btn:hover>div:nth-child(2),.vue-auth-box_ .auth-control_ .range-box .range-slider .range-btn.isDown>div:nth-child(2){border-width:3px;height:0;border-radius:3px;margin:0 6px;border-right-color:#6aa0ff}.vue-auth-box_ .auth-control_ .range-box .range-slider .range-btn:hover>div:nth-child(3),.vue-auth-box_ .auth-control_ .range-box .range-slider .range-btn.isDown>div:nth-child(3){border:solid 4px transparent;height:0;border-left-color:#6aa0ff}.vue-puzzle-overflow{overflow:hidden!important}")),document.head.appendChild(e)}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();const p="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAELklEQVRYR+2YW2wUZRTH//9vtlCoF9IoIklT3PqgPGi326hoetuaGEhIr9SgCYkkgt2WGOQVCca+GavWdr0GjD4YhG3RB3hply1LQA1tEQIxEXapGI2pEkys9LIzx2ylYWfY6e5sF0oi+7hzzvl+3/9855xvhrjNf7zN+XAHcL4Z+n8o6JWTeYt++W25S596AIZy6TB+n3yo+Nchlk8vmIIVowdXU9c3Q1gDSilBlQwjgBAYFGDvdF58/4milqvZwDpOcXWsb5Uh8hmBqkwXFMhlCN8aX5LXNbRy/T+Z+iXsHAFWRXs3QGQPyLucLDJrK5DgUXdTsxPfjAEro8E3Ce50EtxsKxPTwCPH3U2jTmJkBJgWTnAMxDeGMEoa0xQ+LJQnCD4HYFkCyAC3RdwN3U7gMkpxRTTYrMD91sCJIgCxV5R6O1Jcfy7VwonqLoj9/CqB2kF341qncGkBvRe+ureAWpRgoalCBecMFzcdK24YymZRJz5zprgq1tsJwXYL3CVZGvdGHmwZc7JQtra2gE+f712ep2QUYP714DJhaJrXLqXZQszlZwtYdSHoB9ljVk/ePVrSZFL0ZkAlxzQBVseCT8WhZhRThtFB8plk9Zi/qCi8cv0fNxvKFrDy4oF11NXXIFy2EII4iBcG3Y03VLZT8OqRd5aFPduvOEpxRayvXolxAKB2g6NgEhobBlc1HHYKY7WvHf5wtVAPgegIlbbZ9seUZ7AyFnwewi9pGoUyDmhrB931kfnC1ZwOeKlLP8GZJi6QLSFP2yep4toXSbT3ZQAfX3O6omt8Nhd9r/aHQAUMOQywYBZo5uZD2ThQ2rbPCjlnH6yI9rUryE5DU75ctJaake46Be4DuDjF8dFBNA94/AdtiySVxIlpMlTS8td801o70vMigM9huTda2lhcKHVHPO2HZv/P6LIwX7hk/+qzPSvUJGMkrg8AQYTkroRdXMlE+HH/twsG6BsOdJHYZlaO/lBZ6weOiiSXqs3Gqj0TeAxx+T75DIpgwjC0onD51pQD4JaluPrkR/cpFT9DcoVp84LOgTL/DjtBbglgou+puHwB8lEznPxJw1XSX77VtgizBvQNBw4RMqB7xt4Lc3c8lQKJaQHoO4R8ydz0/7MWoCXk8c85MrMC9J3qaafw/WtQlwXST+F3BnAeYB4obgJ1BJIuG+YtiKAjVOZ/Pd1ZdwzoG+4uBtSPpjaRbhXLcwF3hzytb2TilgVgT5BkYybBrTYC+Rvg5nRpdTRJrIs8+VPXPQXj2i4ItxC4O2NQQUQnN4U9rRcz9nH64p4ceM2lziX5Y4s3KHCdUHwE77ecMkMEp6BwhIa2Z6DslZRvfulgHafYLuCas58WLp2aLCFUga70qxOFU6dPFL2W1feYeaU43Y5z/TxnCuYabMEuC043ckdBp4pZ7f8FE5psOI1g6fwAAAAASUVORK5CYII=",v=["width","height"],m=["width","height"],b=["width","height"],x=(0,n._)("div",{class:"loading-gif_"},[(0,n._)("span"),(0,n._)("span"),(0,n._)("span"),(0,n._)("span"),(0,n._)("span")],-1),w=[x],_={class:"auth-control_"},y={class:"range-text"},C=(0,n._)("div",null,null,-1),S=(0,n._)("div",null,null,-1),A=(0,n._)("div",null,null,-1),k=[C,S,A],B=(0,n.aZ)({__name:"App",props:{canvasWidth:{type:Number,default:310},canvasHeight:{type:Number,default:160},show:{type:Boolean,default:!1},puzzleScale:{type:Number,default:1},sliderSize:{type:Number,default:50},range:{type:Number,default:10},imgs:{type:Array,default:null},successText:{type:String,default:"验证通过！"},failText:{type:String,default:"验证失败，请重试"},sliderText:{type:String,default:"拖动滑块完成拼图"},className:{type:String,default:""}},emits:["success","fail","close","reset"],setup(e,{emit:t}){const o=e;(0,n.bv)((()=>{document.addEventListener("mousemove",B,!1),document.addEventListener("mouseup",z,!1),document.addEventListener("touchmove",B,{passive:!1}),document.addEventListener("touchend",z,!1),o.show&&(document.body.classList.add("vue-puzzle-overflow"),H())})),(0,n.Ah)((()=>{u.timer1&&clearTimeout(u.timer1),document.removeEventListener("mousemove",B,!1),document.removeEventListener("mouseup",z,!1),document.removeEventListener("touchmove",B),document.removeEventListener("touchend",z,!1)}));const i=(0,f.iH)(),r=(0,f.iH)(),s=(0,f.iH)(),l=(0,f.iH)(),u=(0,f.qj)({mouseDown:!1,startWidth:50,startX:0,newX:0,pinX:0,pinY:0,loading:!1,isCanSlide:!1,error:!1,infoBoxShow:!1,infoText:"",infoBoxFail:!1,timer1:void 0,closeDown:!1,isSuccess:!1,imgIndex:-1,isSubmting:!1});(0,n.YP)((()=>o.show),(e=>{e?(document.body.classList.add("vue-puzzle-overflow"),H()):(u.isSubmting=!1,u.isSuccess=!1,u.infoBoxShow=!1,document.body.classList.remove("vue-puzzle-overflow"))}));const c=(0,n.Fl)((()=>{const e=u.startWidth+u.newX-u.startX;return e<h.value?h.value:e>o.canvasWidth?o.canvasWidth:e})),d=(0,n.Fl)((()=>Math.round(52.5*Math.max(Math.min(o.puzzleScale,2),.2)+6))),h=(0,n.Fl)((()=>Math.max(Math.min(Math.round(o.sliderSize),Math.round(.5*o.canvasWidth)),10))),x=()=>{!u.mouseDown&&!u.isSubmting&&(u.timer1&&clearTimeout(u.timer1),t("close"))},C=()=>{u.closeDown=!0},S=()=>{u.closeDown&&x(),u.closeDown=!1},A=e=>{var t;u.isCanSlide&&(u.mouseDown=!0,u.startWidth=(null==(t=i.value)?void 0:t.clientWidth)||0,u.newX=e.clientX||e.changedTouches[0].clientX,u.startX=e.clientX||e.changedTouches[0].clientX)},B=e=>{u.mouseDown&&(e.preventDefault(),u.newX=e.clientX||e.changedTouches[0].clientX)},z=()=>{u.mouseDown&&(u.mouseDown=!1,M())},T=(e=!1)=>{var t;if(u.loading&&!e)return;u.loading=!0,u.isCanSlide=!1;const n=r.value,a=s.value,i=l.value,c=null==n?void 0:n.getContext("2d",{willReadFrequently:!0}),h=null==a?void 0:a.getContext("2d"),f=null==i?void 0:i.getContext("2d");if(!c||!h||!f)return void console.error("not found ctx / ctx2 / ctx3");const g=navigator.userAgent.indexOf("Firefox")>=0&&navigator.userAgent.indexOf("Windows")>=0,p=document.createElement("img");if(c.fillStyle="rgba(255,255,255,1)",f.fillStyle="rgba(255,255,255,1)",c.clearRect(0,0,o.canvasWidth,o.canvasHeight),h.clearRect(0,0,o.canvasWidth,o.canvasHeight),u.pinX=X(d.value+20,o.canvasWidth-d.value-10),u.pinY=X(20,o.canvasHeight-d.value-10),p.crossOrigin="anonymous",p.onload=()=>{const[e,t,n,a]=Y(p);c.save(),U(c),c.closePath(),g?(c.clip(),c.save(),c.shadowOffsetX=0,c.shadowOffsetY=0,c.shadowColor="#000",c.shadowBlur=3,c.fill(),c.restore()):(c.shadowOffsetX=0,c.shadowOffsetY=0,c.shadowColor="#000",c.shadowBlur=3,c.fill(),c.clip()),c.drawImage(p,e,t,n,a),f.fillRect(0,0,o.canvasWidth,o.canvasHeight),f.drawImage(p,e,t,n,a),c.globalCompositeOperation="source-atop",U(c),c.arc(u.pinX+Math.ceil(d.value/2),u.pinY+Math.ceil(d.value/2),1.2*d.value,0,2*Math.PI,!0),c.closePath(),c.shadowColor="rgba(255, 255, 255, .8)",c.shadowOffsetX=-1,c.shadowOffsetY=-1,c.shadowBlur=Math.min(Math.ceil(8*o.puzzleScale),12),c.fillStyle="#ffffaa",c.fill();const i=c.getImageData(u.pinX-3,u.pinY-20,u.pinX+d.value+5,u.pinY+d.value+5);h.putImageData(i,0,u.pinY-20),c.restore(),c.clearRect(0,0,o.canvasWidth,o.canvasHeight),c.save(),U(c),c.globalAlpha=.8,c.fillStyle="#ffffff",c.fill(),c.restore(),c.save(),c.globalCompositeOperation="source-atop",U(c),c.arc(u.pinX+Math.ceil(d.value/2),u.pinY+Math.ceil(d.value/2),1.2*d.value,0,2*Math.PI,!0),c.shadowColor="#000",c.shadowOffsetX=2,c.shadowOffsetY=2,c.shadowBlur=16,c.fill(),c.restore(),c.save(),c.globalCompositeOperation="destination-over",c.drawImage(p,e,t,n,a),c.restore(),u.loading=!1,u.isCanSlide=!0},p.onerror=()=>{T(!0)},!e&&null!=(t=o.imgs)&&t.length){let e=X(0,o.imgs.length-1);e===u.imgIndex&&(e===o.imgs.length-1?e=0:e++),u.imgIndex=e,p.src=o.imgs[e]}else p.src=F()},X=(e,t)=>Math.ceil(Math.random()*(t-e)+e),Y=e=>{const t=e.width/e.height,n=o.canvasWidth/o.canvasHeight;let a=0,i=0,r=0,s=0;return t>n?(s=o.canvasHeight,r=t*s,i=0,a=(o.canvasWidth-r)/2):(r=o.canvasWidth,s=r/t,a=0,i=(o.canvasHeight-s)/2),[a,i,r,s]},U=e=>{const t=Math.ceil(15*o.puzzleScale);e.beginPath(),e.moveTo(u.pinX,u.pinY),e.lineTo(u.pinX+t,u.pinY),e.arcTo(u.pinX+t,u.pinY-t/2,u.pinX+t+t/2,u.pinY-t/2,t/2),e.arcTo(u.pinX+t+t,u.pinY-t/2,u.pinX+t+t,u.pinY,t/2),e.lineTo(u.pinX+t+t+t,u.pinY),e.lineTo(u.pinX+t+t+t,u.pinY+t),e.arcTo(u.pinX+t+t+t+t/2,u.pinY+t,u.pinX+t+t+t+t/2,u.pinY+t+t/2,t/2),e.arcTo(u.pinX+t+t+t+t/2,u.pinY+t+t,u.pinX+t+t+t,u.pinY+t+t,t/2),e.lineTo(u.pinX+t+t+t,u.pinY+t+t+t),e.lineTo(u.pinX,u.pinY+t+t+t),e.lineTo(u.pinX,u.pinY+t+t),e.arcTo(u.pinX+t/2,u.pinY+t+t,u.pinX+t/2,u.pinY+t+t/2,t/2),e.arcTo(u.pinX+t/2,u.pinY+t,u.pinX,u.pinY+t,t/2),e.lineTo(u.pinX,u.pinY)},F=()=>{const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)return console.error("not found ctx"),"";e.width=o.canvasWidth,e.height=o.canvasHeight,t.fillStyle=`rgb(${X(100,255)},${X(100,255)},${X(100,255)})`,t.fillRect(0,0,o.canvasWidth,o.canvasHeight);for(let o=0;o<12;o++)if(t.fillStyle=`rgb(${X(100,255)},${X(100,255)},${X(100,255)})`,t.strokeStyle=`rgb(${X(100,255)},${X(100,255)},${X(100,255)})`,X(0,2)>1)t.save(),t.rotate(X(-90,90)*Math.PI/180),t.fillRect(X(-20,e.width-20),X(-20,e.height-20),X(10,e.width/2+10),X(10,e.height/2+10)),t.restore();else{t.beginPath();const o=X(-Math.PI,Math.PI);t.arc(X(0,e.width),X(0,e.height),X(10,e.height/2+10),o,o+1.5*Math.PI),t.closePath(),t.fill()}return e.toDataURL("image/png")},M=()=>{u.isSubmting=!0;const e=Math.abs(u.pinX-(c.value-h.value)+(d.value-h.value)*((c.value-h.value)/(o.canvasWidth-h.value))-3);e<o.range?(u.infoText=o.successText,u.infoBoxFail=!1,u.infoBoxShow=!0,u.isCanSlide=!1,u.isSuccess=!0,u.timer1&&clearTimeout(u.timer1),u.timer1=setTimeout((()=>{u.isSubmting=!1,t("success",e)}),800)):(u.infoText=o.failText,u.infoBoxFail=!0,u.infoBoxShow=!0,u.isCanSlide=!1,t("fail",e),u.timer1&&clearTimeout(u.timer1),u.timer1=setTimeout((()=>{u.isSubmting=!1,H()}),800))},W=()=>{u.infoBoxFail=!1,u.infoBoxShow=!1,u.isCanSlide=!1,u.isSuccess=!1,u.startWidth=h.value,u.startX=0,u.newX=0},H=e=>{u.isSubmting||(W(),T(),e&&t("reset"))};return(t,o)=>((0,n.wg)(),(0,n.j4)(n.lR,{to:"body"},[(0,n._)("div",{class:(0,a.C_)(["vue-puzzle-vcode",{show_:e.show},e.className]),onMousedown:C,onMouseup:S,onTouchstart:C,onTouchend:S},[(0,n._)("div",{class:"vue-auth-box_",onMousedown:o[3]||(o[3]=(0,g.iM)((()=>{}),["stop"])),onTouchstart:o[4]||(o[4]=(0,g.iM)((()=>{}),["stop"]))},[(0,n._)("div",{class:"auth-body_",style:(0,a.j5)(`height: ${e.canvasHeight}px`)},[(0,n._)("canvas",{ref_key:"canvas1",ref:r,width:e.canvasWidth,height:e.canvasHeight,style:(0,a.j5)(`width:${e.canvasWidth}px;height:${e.canvasHeight}px`)},null,12,v),(0,n._)("canvas",{ref_key:"canvas3",ref:l,class:(0,a.C_)(["auth-canvas3_",{show:u.isSuccess}]),width:e.canvasWidth,height:e.canvasHeight,style:(0,a.j5)(`width:${e.canvasWidth}px;height:${e.canvasHeight}px`)},null,14,m),(0,n._)("canvas",{ref_key:"canvas2",ref:s,class:"auth-canvas2_",width:(0,f.SU)(d),height:e.canvasHeight,style:(0,a.j5)(`width:${(0,f.SU)(d)}px;height:${e.canvasHeight}px;transform:translateX(${(0,f.SU)(c)-(0,f.SU)(h)-((0,f.SU)(d)-(0,f.SU)(h))*(((0,f.SU)(c)-(0,f.SU)(h))/(e.canvasWidth-(0,f.SU)(h)))}px)`)},null,12,b),(0,n._)("div",{class:(0,a.C_)(["loading-box_",{hide_:!u.loading}])},w,2),(0,n._)("div",{class:(0,a.C_)(["info-box_",{show:u.infoBoxShow},{fail:u.infoBoxFail}])},(0,a.zw)(u.infoText),3),(0,n._)("div",{class:(0,a.C_)(["flash_",{show:u.isSuccess}]),style:(0,a.j5)(`transform: translateX(${u.isSuccess?`${e.canvasWidth+.578*e.canvasHeight}px`:`-${.578*e.canvasHeight}px`}) skew(-30deg, 0);`)},null,6),(0,n._)("img",{class:"reset_",onClick:o[0]||(o[0]=e=>H(!0)),src:p})],4),(0,n._)("div",_,[(0,n._)("div",{class:"range-box",style:(0,a.j5)(`height:${(0,f.SU)(h)}px`)},[(0,n._)("div",y,(0,a.zw)(e.sliderText),1),(0,n._)("div",{class:"range-slider",ref_key:"rangeSlider",ref:i,style:(0,a.j5)(`width:${(0,f.SU)(c)}px`)},[(0,n._)("div",{class:(0,a.C_)(["range-btn",{isDown:u.mouseDown}]),style:(0,a.j5)(`width:${(0,f.SU)(h)}px`),onMousedown:o[1]||(o[1]=e=>A(e)),onTouchstart:o[2]||(o[2]=e=>A(e))},k,38)],4)],4)])],32)],34)]))}});var z=o(83744);const T=o(19575).Base64;var X={components:{Vcode:B},name:"Login",computed:{lock(){return c.Z},UserFilled(){return u.Z},currentLanguage(){return"zh-CN"===this.$i18n.locale?"中文":"English"}},data(){return{isShow:!1,code:"",form:{username:"",password:""},checked:!1,loading:!1,svg:'\n        <path class="path" d="\n          M 30 15\n          L 28 17\n          M 25.61 25.61\n          A 15 15, 0, 0, 1, 15 30\n          A 15 15, 0, 1, 1, 27.99 7.5\n          L 15 15\n        " style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>\n      ',rules:{username:[{required:!0,message:this.$t("login.usernameRequired"),trigger:"blur"}],password:[{required:!0,message:this.$t("login.passwordRequired"),trigger:"blur"}]}}},mounted(){this.getCookie()},methods:{switchLanguage(e){this.$i18n.locale=e},submitForm(){this.form.username&&this.form.password?this.isShow=!0:(0,h.z8)({message:this.$t("login.inputNullError"),type:"error"})},onSuccess(e){console.log("验证成功"),this.isShow=!1,this.loading=!0;let t=this;this.$refs["form"].validate((e=>{if(e){if(this.checked){let e=T.encode(this.form.password);this.setCookie(this.form.username,e,7)}else this.setCookie("","",-1);try{d.Z.post("/login",this.form).then((e=>{"0"===e.code?((0,h.z8)({message:this.$t("login.loginSuccess"),type:"success"}),sessionStorage.setItem("token",JSON.stringify(e.data.token)),t.$router.push("/home")):"201"===e.code?(0,h.z8)({message:this.$t("login.error"),type:"error"}):"403"===e.code?(0,h.z8)({message:this.$t("login.banStatusError"),type:"error"}):(0,h.z8)({message:e.msg,type:"error"})}))}catch(o){console.error(o)}finally{this.loading=!1}}}))},setCookie(e,t,o){let n=new Date;n.setTime(n.getTime()+864e5*o),window.document.cookie="username="+e+";path=/;expires="+n.toGMTString(),window.document.cookie="password="+t+";path=/;expires="+n.toGMTString()},getCookie(){if(document.cookie.length>0){let e=document.cookie.split("; ");for(let t=0;t<e.length;t++){let o=e[t].split("=");"username"===o[0]?this.form.username=o[1]:"password"===o[0]&&(this.form.password=T.decode(o[1]),this.checked=!0)}}},onClose(){this.isShow=!1,this.$message({message:"取消验证！",type:"warning"})},onfail(){console.log("验证失败")}}};const Y=(0,z.Z)(X,[["render",l]]);var U=Y}}]);
//# sourceMappingURL=363.0aa96524.js.map