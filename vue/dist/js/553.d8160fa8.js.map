{"version":3,"file":"js/553.d8160fa8.js","mappings":"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","sources":["webpack://springboot-vue-demo/./src/views/Document.vue","webpack://springboot-vue-demo/./src/views/Document.vue?4cdc"],"sourcesContent":["<template #default=\"scope\">\r\n  <div style=\"padding: 10px;\">\r\n\r\n    <!--功能区域-->\r\n    <div style=\"margin: 10px;padding: 0px\">\r\n      <el-button color=\"#E0BF75\" @click=\"add\">新增</el-button>\r\n      <el-button color=\"#958CDD\" @click=\"exportExcel\">导出</el-button>\r\n      <el-button color=\"#FC9DA9\" @click=\"load\">刷新</el-button>\r\n    </div>\r\n    <!--搜索区域-->\r\n    <div style=\"margin: 10px ; padding: 0px\">\r\n      <el-form :inline=\"true\" :model=\"formInline\" class=\"demo-form-inline\" ref=\"resetformInline\">\r\n        <el-form-item label=\"料号\">\r\n          <el-input v-model=\"formInline.materialNo\" placeholder=\"please input\" clearable/>\r\n        </el-form-item>\r\n        <el-form-item label=\"项目编号\">\r\n          <el-input v-model=\"formInline.itemNo\" placeholder=\"Please input\"/>\r\n        </el-form-item>\r\n        <el-form-item label=\"文件类型\">\r\n          <el-select v-model=\"formInline.documentType\" placeholder=\"Please select\">\r\n            <el-option label=\"材料清单\" value=\"1\"/>\r\n            <el-option label=\"装配工艺图\" value=\"2\"/>\r\n            <el-option label=\"电气接线图\" value=\"3\"/>\r\n            <el-option label=\"变更通知单\" value=\"4\"/>\r\n            <el-option label=\"技术交底单\" value=\"5\"/>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button color=\"#E0BF75\" style=\"margin-left: 5px\" :icon=\"Search\" @click=\"load\">查询</el-button>\r\n          <el-button color=\"#E0BF75\" style=\"margin-left: 5px\" :icon=\"RefreshLeft\" @click=\"reset\">重置</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <!--批量操作按钮区域-->\r\n    <div style=\"margin: 10px ; padding: 0px\">\r\n      <el-button type=\"primary\" @click=\"handleDownLoadDrawings\">批量下载</el-button>\r\n      <el-popconfirm title=\"Are you sure to delete this?\"\r\n                     @confirm=\"handleDeleteDrawings\">\r\n        <template #reference>\r\n          <el-button type=\"danger\" v-if=\"user.role !== 3\">批量删除</el-button>\r\n        </template>\r\n      </el-popconfirm>\r\n    </div>\r\n    <!--内容区域-->\r\n    <el-table\r\n        :data=\"tableData\"\r\n        style=\"width: 100%\"\r\n        border\r\n        class=\"table\"\r\n        :stripe=\"false\"\r\n        @selection-change=\"handleSelectionChange\"\r\n    >\r\n      <el-table-column type=\"selection\" width=\"55\"/>\r\n      <el-table-column prop=\"id\" label=\"ID\" sortable/>\r\n      <el-table-column prop=\"itemNo\" label=\"项目编号\"/>\r\n      <el-table-column prop=\"materialNo\" label=\"料号\"/>\r\n      <el-table-column prop=\"documentName\" label=\"文件名称\"/>\r\n      <el-table-column prop=\"documentType\" label=\"文件类型\">\r\n        <template #default=\"scope\">\r\n          {{ getDocumentType(scope.row.documentType) }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"sequenceNo\" label=\"文件序号\"/>\r\n      <el-table-column prop=\"documentVersion\" label=\"文件版本\"/>\r\n      <el-table-column prop=\"documentPath\" label=\"文件路径\" :min-width=\"200\" :ellipsis=\"true\"\r\n                       style=\"white-space: nowrap; word-break: break-all;\"/>\r\n      <el-table-column prop=\"createTime\" label=\"创建时间\"/>\r\n      <el-table-column prop=\"updateTime\" label=\"更新时间\"/>\r\n      <el-table-column fixed=\"right\" label=\"操作\" width=\"220\">\r\n        <template #default=\"scope\">\r\n          <div class=\"btn-group\">\r\n            <div class=\"col\">\r\n              <el-button size=\"small\" @click=\"previewFile(scope.row)\"\r\n              >预览\r\n              </el-button\r\n              >\r\n              <el-button size=\"small\" v-if=\"user.role !== 3\" @click=\"updateVersion(scope.row)\"\r\n              >更新\r\n              </el-button\r\n              >\r\n              <el-popconfirm title=\"Are you sure to delete this?\"\r\n                             @confirm=\"handleDelete(scope.row.id,scope.row.documentPath)\">\r\n                <template #reference>\r\n                  <el-button type=\"danger\" size=\"small\" v-if=\"user.role !== 3\">删除</el-button>\r\n                </template>\r\n              </el-popconfirm>\r\n            </div>\r\n            <div class=\"col\">\r\n              <el-button size=\"small\" @click=\"downloadFile(scope.row)\">下载文件</el-button>\r\n              <el-button size=\"small\" @click=\"showHistory(scope.row)\">历史版本</el-button>\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!--分页条-->\r\n    <div style=\"margin: 10px ; padding: 0px\">\r\n      <el-pagination\r\n          v-model:current-page=\"currentPage\"\r\n          v-model:page-size=\"pageSize\"\r\n          :page-sizes=\"[5, 10, 20, 40]\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n      />\r\n    </div>\r\n    <!--  新增对话框 -->\r\n    <el-dialog v-model=\"dialogVisible\" title=\"Tips\" width=\"50%\" :before-close=\"handleCloseDialog\">\r\n      <el-form :model=\"form\" label-width=\"120px\">\r\n        <el-form-item label=\"项目编号\">\r\n          <el-input v-model=\"form.itemNo\" style=\"width: 80%\"/>\r\n        </el-form-item>\r\n        <el-form-item label=\"料号\">\r\n          <el-input v-model=\"form.materialNo\" style=\"width: 80%\"/>\r\n        </el-form-item>\r\n        <el-form-item label=\"图纸类型\">\r\n          <div class=\"radio-group-container\">\r\n            <el-radio-group v-model=\"form.documentType\">\r\n              <el-radio :label=\"1\">材料清单</el-radio>\r\n              <el-radio :label=\"2\">装配工艺图</el-radio>\r\n              <el-radio :label=\"3\">电气接线图</el-radio>\r\n              <el-radio :label=\"4\">变更通知单</el-radio>\r\n              <el-radio :label=\"5\">技术交底单</el-radio>\r\n            </el-radio-group>\r\n          </div>\r\n        </el-form-item>\r\n        <el-form-item label=\"选择文件\">\r\n          <el-upload ref=\"upload\"\r\n                     :auto-upload=\"false\"\r\n                     :http-request=\"uploadFile\"\r\n                     :disabled=\"isDisabledUpload\">\r\n            <template #trigger>\r\n              <el-button type=\"primary\">选择文件</el-button>\r\n            </template>\r\n            <template #tip>\r\n              <div class=\"el-upload__tip\">\r\n                Any files with a size less than 10MB.\r\n              </div>\r\n            </template>\r\n\r\n          </el-upload>\r\n        </el-form-item>\r\n        <el-form-item label=\"上传文件\">\r\n          <div>\r\n            <el-button type=\"primary\" @click=\"handleBeforeUpload\">点击上传</el-button>\r\n          </div>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"cancel\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"save\">\r\n          确认\r\n        </el-button>\r\n      </span>\r\n      </template>\r\n    </el-dialog>\r\n\r\n    <!--  更新文件对话框 -->\r\n    <el-dialog v-model=\"updatedDialogVisible\" title=\"Tips\" width=\"50%\" :before-close=\"handleCloseUpdateDialog\">\r\n      <el-form :model=\"form\" label-width=\"120px\">\r\n        <el-form-item label=\"选择文件\">\r\n          <el-upload ref=\"updateDocument\"\r\n                     :auto-upload=\"false\"\r\n                     :http-request=\"updateFile\">\r\n            <template #trigger>\r\n              <el-button type=\"primary\">选择文件</el-button>\r\n            </template>\r\n            <template #tip>\r\n              <div class=\"el-upload__tip\">\r\n                Any files with a size less than 10MB.\r\n              </div>\r\n            </template>\r\n          </el-upload>\r\n        </el-form-item>\r\n        <el-form-item label=\"上传文件\">\r\n          <div>\r\n            <el-button type=\"primary\" @click=\"handleBeforeUpdate\">点击上传</el-button>\r\n          </div>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"cancelUpate\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"saveDocument\">\r\n          确认\r\n        </el-button>\r\n      </span>\r\n      </template>\r\n    </el-dialog>\r\n\r\n    <!--查看历史版本对话框-->\r\n    <el-dialog v-model=\"historyDialogVisible\" title=\"Tips\" width=\"80%\" :close-on-click-modal=\"false\"\r\n               :before-close=\"handleDialogHisClose\">\r\n      <el-table\r\n          :data=\"historyTableData\"\r\n          style=\"width: 100%\"\r\n          border\r\n          class=\"table\"\r\n          :stripe=\"false\"\r\n      >\r\n        <el-table-column type=\"selection\" width=\"55\"/>\r\n        <el-table-column prop=\"id\" label=\"ID\" sortable/>\r\n        <el-table-column prop=\"itemNo\" label=\"项目编号\"/>\r\n        <el-table-column prop=\"materialNo\" label=\"料号\"/>\r\n        <el-table-column prop=\"documentName\" label=\"文件名称\"/>\r\n        <el-table-column prop=\"documentType\" label=\"文件类型\">\r\n          <template #default=\"scope\">\r\n            {{ getDocumentType(scope.row.documentType) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"sequenceNo\" label=\"文件序号\"/>\r\n        <el-table-column prop=\"documentPath\" label=\"文件路径\"/>\r\n        <el-table-column prop=\"createTime\" label=\"创建时间\"/>\r\n        <el-table-column prop=\"updateTime\" label=\"更新时间\"/>\r\n        <el-table-column fixed=\"right\" label=\"操作\" width=\"220\">\r\n          <template #default=\"scope\">\r\n            <div class=\"btn-group\">\r\n              <div class=\"col\">\r\n                <el-button size=\"small\" @click=\"previewFile(scope.row)\"\r\n                >预览\r\n                </el-button\r\n                >\r\n                <el-button size=\"small\" @click=\"downloadFile(scope.row)\">下载文件</el-button>\r\n              </div>\r\n              <div class=\"col\">\r\n                <el-popconfirm title=\"Are you sure to delete this?\"\r\n                               @confirm=\"handleDelete(scope.row.id,scope.row.documentPath)\">\r\n                  <template #reference>\r\n                    <el-button type=\"danger\" size=\"small\" v-if=\"user.role !== 3\">删除</el-button>\r\n                  </template>\r\n                </el-popconfirm>\r\n              </div>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <!--分页条-->\r\n      <div style=\"margin: 10px ; padding: 0px\">\r\n        <el-pagination\r\n            v-model:current-page=\"currentHisPage\"\r\n            v-model:page-size=\"pageHisSize\"\r\n            :page-sizes=\"[5, 10, 20, 40]\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :total=\"totalHis\"\r\n            @size-change=\"handleHisSizeChange\"\r\n            @current-change=\"handleHisCurrentChange\"\r\n        />\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport {RefreshLeft, Search} from '@element-plus/icons-vue';\r\n\r\n</script>\r\n\r\n<script>\r\n\r\nimport request from \"@/utils/request\";\r\nimport {ElMessage} from \"element-plus\";\r\nimport * as XLSX from 'xlsx';\r\nimport * as FileSaver from 'file-saver';\r\nimport {Base64} from \"js-base64\";\r\nimport axios from \"axios\";\r\nimport {ref} from \"vue\";\r\n\r\nlet upload = ref();\r\nlet updateDocument = ref();\r\nexport default {\r\n  name: 'Document',\r\n  components: {},\r\n  data() {\r\n    return {\r\n      previewUrl: '',\r\n      form: {},\r\n      historyForm: {},\r\n      previewForm: {},\r\n      //搜索栏表单\r\n      formInline: {},\r\n      search: '',\r\n\r\n      // //文件存储的真实路径 生产环境时应视需求修改\r\n      // file_location:'/files/',\r\n\r\n      //鉴权用的用户信息\r\n      userId:0,\r\n      user:{},\r\n\r\n\r\n\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n\r\n      currentHisPage: 1,\r\n      pageHisSize: 10,\r\n\r\n      //总条数\r\n      total: 0,\r\n\r\n      totalHis: 0,\r\n      // 新增数据的对话框显示控制\r\n      dialogVisible: false,\r\n      //更新文件版本对话框显示控制\r\n      updatedDialogVisible: false,\r\n      //修改文件信息对话框显示控制\r\n      editDialogVisible: false,\r\n      //查看历史版本对话框显示控制\r\n      historyDialogVisible: false,\r\n      fileData: '', // 表单数据+文件\r\n      EditData: '',//编辑更新数据 新数据行+编辑行\r\n      // importData:form,\r\n      // headers:{\r\n      //   token: JSON.parse(sessionStorage.getItem('token'))\r\n      // },\r\n      oldFilePath: '',\r\n      tableData: [],\r\n\r\n      historyTableData: [],\r\n      ids: [],\r\n      selectedFiles: [],\r\n      // filesUploadUrl:\"http://\" + window.server.filesUploadUrl + \":9090/files/uploadDrawingFiles\"\r\n    }\r\n  },\r\n  created() {\r\n\r\n    request.get(\"/getUserInfo\",\r\n    ).then(res => {\r\n      this.userId = res.data;\r\n      request.get(\"/user/\" + this.userId\r\n      ).then(res => {\r\n        if (res.code === \"0\") {\r\n          this.user = res.data;\r\n        }\r\n      })\r\n    });\r\n    this.load()\r\n  },\r\n  computed: {\r\n    isDisabledUpload() {\r\n      const {itemNo, documentType} = this.form || {}\r\n      return !itemNo?.trim() || !documentType\r\n    }\r\n  },\r\n  methods: {\r\n    async handleDownLoadDrawings() {\r\n      if (!this.ids.length) {\r\n        ElMessage({\r\n          message: '请选择数据',\r\n          type: 'warning',\r\n        })\r\n        return\r\n      }\r\n      for (const file of this.selectedFiles) {\r\n        const url_raw = window.server.filesUploadUrl + \":\" + window.server.filesUploadPort + file.documentPath.replace(window.server.filesUploadUrl,\"\");\r\n        console.log(url_raw)\r\n        const url = \"http://\" + url_raw;\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.target = \"_blank\";\r\n        link.download = url.split('/').pop(); // 获取文件名\r\n        link.click();\r\n        await new Promise(resolve => setTimeout(resolve, 1000)); // 等待1s\r\n      }\r\n    },\r\n    //批量删除方法\r\n    handleDeleteDrawings() {\r\n      if (!this.ids.length) {\r\n        ElMessage({\r\n          message: '请选择数据',\r\n          type: 'warning',\r\n        })\r\n        return\r\n      }\r\n      request.post(\"/document/deleteBatch\", this.ids).then(res => {\r\n            console.log(res);\r\n            if (res.code === '0') {\r\n              ElMessage({\r\n                message: '批量删除成功',\r\n                type: 'success',\r\n              })\r\n              this.del_files(this.ids).then(() => {  // 等待删除操作完成再执行load()方法\r\n                this.load(); // 更新表单数据\r\n              });\r\n            } else {\r\n              ElMessage({\r\n                message: '批量删除失败',\r\n                type: 'error',\r\n                //\r\n              })\r\n            }\r\n          }\r\n      )\r\n    },\r\n\r\n    //多选栏选择变化\r\n    handleSelectionChange(val) {\r\n      this.ids = val.map(v => v.id)\r\n      this.selectedFiles = val\r\n      console.log(\"this.selectedFiles:\" + this.selectedFiles)\r\n    },\r\n\r\n\r\n    async historyLoad() {\r\n      try {\r\n\r\n        //延迟执行\r\n        await this.delay(1000);\r\n\r\n        request.post(`/document/historyList/${this.currentHisPage}/${this.pageHisSize}`, this.historyForm\r\n        ).then(res => {\r\n          console.log(res);\r\n          this.historyTableData = res.data.records;\r\n          this.totalHis = res.data.total;\r\n\r\n\r\n        })\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    },\r\n    //展示历史版本数据对话框点击事件\r\n    showHistory(row) {\r\n      this.historyForm = JSON.parse(JSON.stringify(row));\r\n      this.historyLoad();\r\n      this.historyDialogVisible = true;\r\n    },\r\n    //文件下载\r\n    downloadFile(row) {\r\n      const url_raw = window.server.filesUploadUrl + \":\" + window.server.filesUploadPort + row.documentPath.replace(window.server.filesUploadUrl,\"\");\r\n      console.log(url_raw)\r\n      const url = \"http://\" + url_raw;\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = url.split('/').pop(); // 获取文件名\r\n      link.click();\r\n    },\r\n    //更新文件版本按钮\r\n    updateVersion(row) {\r\n      this.form = JSON.parse(JSON.stringify(row));\r\n      this.oldFilePath = this.form.documentPath;\r\n      this.updatedDialogVisible = true;\r\n      this.$nextTick(() => {\r\n        this.$refs[\"updateDocument\"].clearFiles();\r\n      })\r\n    },\r\n\r\n    handleDialogHisClose() {\r\n      this.historyTableData = [];\r\n      this.historyDialogVisible = false;\r\n    },\r\n\r\n    handleCloseUpdateDialog() {\r\n      // 调用 cancel 方法\r\n      this.cancelUpate();\r\n    },\r\n    //关闭窗口的时候和cancel的时候一样 都要删除那些没有保存的文件\r\n    handleCloseEditDialog() {\r\n      // 调用 cancel 方法\r\n      this.cancel();\r\n    },\r\n    handleCloseDialog() {\r\n      // 调用 cancel 方法\r\n      this.cancel();\r\n    },\r\n    updateFile(params) {\r\n      this.fileData = new FormData()\r\n      let string = JSON.stringify(this.form)\r\n      this.fileData.append('document', string)\r\n      this.fileData.append(\"file\", params.file) // append增加数据\r\n      axios.request({\r\n        method: 'post',\r\n        url: 'http://' + window.server.filesUploadUrl + ':9090/files/updateDocumentFiles',\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n          'token': JSON.parse(sessionStorage.getItem('token'))\r\n        },\r\n        data: this.fileData\r\n      }).then(response => {\r\n        let res = response.data;\r\n        if (res.code === '0') {\r\n          ElMessage({\r\n            message: '更新成功',\r\n            type: 'success',\r\n          })\r\n\r\n          // 从返回结果中获取filePath和newVersion\r\n          this.form.documentVersion = res.data.newVersion;\r\n          this.form.documentPath = res.data.filePath;\r\n        }\r\n      }).catch(() => {\r\n      })\r\n    },\r\n    handleBeforeUpdate() {\r\n      updateDocument.value.submit()\r\n    },\r\n    uploadFile(params) {\r\n      this.fileData = new FormData()\r\n      let string = JSON.stringify(this.form)\r\n      this.fileData.append('document', string)\r\n      this.fileData.append(\"file\", params.file) // append增加数据\r\n      axios.request({\r\n        method: 'post',\r\n        url: 'http://' + window.server.filesUploadUrl + ':9090/files/uploadDocumentFiles',\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n          'token': JSON.parse(sessionStorage.getItem('token'))\r\n        },\r\n        data: this.fileData\r\n      }).then(response => {\r\n        let res = response.data;\r\n        if (res.code === '0') {\r\n          ElMessage({\r\n            message: '上传成功',\r\n            type: 'success',\r\n          })\r\n          //如果是新增的文件 则默认其版本为A01\r\n          this.form.documentVersion = \"A01\";\r\n          this.form.documentPath = res.data;\r\n          this.oldFilePath = this.form.documentPath;\r\n        }\r\n      }).catch(() => {\r\n      })\r\n    },\r\n\r\n    handleBeforeUpload() {\r\n      upload.value.submit()\r\n    },\r\n\r\n    exportExcel() {\r\n      // 获取当前查询结果的数据\r\n      const data = this.tableData;\r\n      // 转换为Excel文件格式\r\n      const ws = XLSX.utils.json_to_sheet(data);\r\n      const wb = XLSX.utils.book_new();\r\n      XLSX.utils.book_append_sheet(wb, ws, 'Sheet1');\r\n      // 保存文件\r\n      const fileName = '图纸数据.xlsx';\r\n      const blob = new Blob([XLSX.write(wb, {bookType: 'xlsx', type: 'array'})], {type: 'application/octet-stream'});\r\n      FileSaver.saveAs(blob, fileName);\r\n    },\r\n    getDocumentType(type) {\r\n      switch (type) {\r\n        case 1:\r\n          return '材料清单'\r\n        case 2:\r\n          return '装配工艺图'\r\n        case 3:\r\n          return '电气接线图 '\r\n        case 4:\r\n          return '变更通知单'\r\n        case 5:\r\n          return '技术交底单'\r\n        default:\r\n          return ''\r\n      }\r\n    },\r\n\r\n    filesUploadSuccess(res) {\r\n      this.form.documentPath = res.data;\r\n    },\r\n    delay(time) {\r\n      return new Promise(resolve => setTimeout(resolve, time));\r\n    },\r\n    async load() {\r\n      try {\r\n\r\n        //延迟执行\r\n        await this.delay(1000);\r\n\r\n        request.post(`/document/${this.currentPage}/${this.pageSize}`, JSON.parse(JSON.stringify(this.formInline))\r\n        ).then(res => {\r\n          console.log(res);\r\n          this.tableData = res.data.records;\r\n          this.total = res.data.total;\r\n\r\n\r\n        })\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n\r\n    },\r\n\r\n    reset() {\r\n      this.formInline = {};\r\n      this.$refs[\"resetformInline\"].resetFields();\r\n    },\r\n    add() {\r\n\r\n      this.dialogVisible = true;\r\n      this.form = {};\r\n\r\n      this.$nextTick(() => {\r\n        this.$refs[\"upload\"].clearFiles();\r\n      })\r\n    },\r\n    //删除单个文件\r\n    del_file(path) {\r\n      console.log(\"path\" + path)\r\n      request.post(\"/files/delDocumentFile\", {delDocumentPath: path}).then(res => {\r\n            console.log(res);\r\n            if (res.code === '0') {\r\n              ElMessage({\r\n                message: 'nginx文件同步成功',\r\n                type: 'success',\r\n              })\r\n            } else {\r\n              ElMessage({\r\n                message: 'nginx文件同步失败',\r\n                type: 'error',\r\n                //\r\n              })\r\n            }\r\n          }\r\n      )\r\n    },\r\n    //批量删除文件\r\n    del_files(ids) {\r\n      return request.post(\"/files/delDocumentFiles\", this.ids).then(res => {\r\n            console.log(res);\r\n            if (res.code === '0') {\r\n              ElMessage({\r\n                message: 'nginx文件同步成功',\r\n                type: 'success',\r\n              })\r\n            } else {\r\n              ElMessage({\r\n                message: 'nginx文件同步失败',\r\n                type: 'error',\r\n                //\r\n              })\r\n            }\r\n          }\r\n      )\r\n    },\r\n\r\n\r\n    saveDocument() {\r\n      // Convert documentType to an integer before submitting the form\r\n      this.form.documentType = parseInt(this.form.documentType);\r\n      //更新文件版本\r\n      if (this.form.id) {\r\n\r\n        const fieldNames = {\r\n          itemNo: '产品编号',\r\n          documentType: '图纸类型',\r\n          materialNo: '料号',\r\n          documentPath: '图纸文件',\r\n        };\r\n        const requiredFields = Object.keys(fieldNames);\r\n        let isFormValid = true;\r\n        let missingFields = [];\r\n        for (let i = 0; i < requiredFields.length; i++) {\r\n          const field = requiredFields[i];\r\n          if (!this.form[field]) {\r\n            isFormValid = false;\r\n            missingFields.push(fieldNames[field]);\r\n          }\r\n        }\r\n        if (isFormValid) {\r\n          request.post(\"/document\", this.form).then(res => {\r\n\r\n            if (res.code === '0') {\r\n              ElMessage({\r\n                message: '更新成功',\r\n                type: 'success',\r\n              })\r\n              this.load();//更新表单数据\r\n            } else {\r\n              ElMessage({\r\n                message: res.msg,\r\n                type: 'error',\r\n                //\r\n              })\r\n            }\r\n          });\r\n        } else {\r\n          ElMessage({\r\n            message: `缺少以下字段：${missingFields.join(', ')}`,\r\n            type: 'warning',\r\n          })\r\n        }\r\n      }\r\n      this.updatedDialogVisible = false;//关闭弹窗\r\n    },\r\n    save() {\r\n      // Convert documentType to an integer before submitting the form\r\n      this.form.documentType = parseInt(this.form.documentType);\r\n      //新增\r\n      const fieldNames = {\r\n        itemNo: '产品编号',\r\n        documentType: '图纸类型',\r\n        materialNo: '料号',\r\n        documentPath: '图纸文件',\r\n      };\r\n      const requiredFields = Object.keys(fieldNames);\r\n      let isFormValid = true;\r\n      let missingFields = [];\r\n      for (let i = 0; i < requiredFields.length; i++) {\r\n        const field = requiredFields[i];\r\n        if (!this.form[field]) {\r\n          isFormValid = false;\r\n          missingFields.push(fieldNames[field]);\r\n        }\r\n      }\r\n      if (isFormValid) {\r\n        //新增\r\n        request.post(\"/document\", this.form).then(res => {\r\n          console.log(\"进入新增\");\r\n          if (res.code === '0') {\r\n            ElMessage({\r\n              message: '新增成功',\r\n              type: 'success',\r\n            })\r\n            this.load();//更新表单数据\r\n          } else {\r\n            console.log(\"this.form\" + this.form);\r\n            ElMessage({\r\n              message: res.msg,\r\n              type: 'error',\r\n\r\n            })\r\n            //   如果新增失败 需要发起删除掉上传到文件服务器的文件\r\n            console.log(this.oldFilePath)\r\n            this.del_file(this.form.documentPath)\r\n          }\r\n        });\r\n      } else {\r\n        ElMessage({\r\n          message: `缺少以下字段：${missingFields.join(', ')}`,\r\n          type: 'warning',\r\n        })\r\n      }\r\n      this.dialogVisible = false;//关闭弹窗\r\n\r\n\r\n    },\r\n\r\n    cancelUpate() {\r\n      //只要用户在取消之前进行了文件上传的工作 并且点击了取消 都要删除掉本次上传的文件\r\n      if (this.form.documentPath !== this.oldFilePath) {\r\n        console.log(\"用户上传过文件了\")\r\n        console.log(\"this.form.documentPath:\" + this.form.documentPath)\r\n        // this.del_file(this.form.documentPath.substring(this.form.documentPath.indexOf(\"/files/\") + \"/files/\".length))\r\n        // this.del_file(this.form.documentPath.substring(this.form.documentPath.indexOf(this.file_location) + this.file_location.length))\r\n        this.del_file(this.form.documentPath)\r\n      }\r\n      //如果用户没有进行了文件上传的工作\r\n      //关闭对话框\r\n      this.updatedDialogVisible = false;\r\n    },\r\n    //如果用户在新增或者修改窗口点击了取消\r\n    cancel() {\r\n      //新增的时候 如果点击了取消 而且又上传过文件 则需要把这个文件删除掉\r\n      if (this.oldFilePath !== \"\") {\r\n        //如果存储的文件发生了变化 并且用户点击了确定删除掉源文件\r\n        console.log(\"this.oldFilePath:\" + this.oldFilePath)\r\n        this.del_file(this.oldFilePath)\r\n      }\r\n\r\n      //关闭对话框\r\n      this.dialogVisible = false;\r\n    },\r\n    previewFile(row) {\r\n      this.form = JSON.parse(JSON.stringify(row));\r\n\r\n      request.get(\"/document/getId/\" + this.form.id).then(res => {\r\n        console.log(res);\r\n        if (res.code === '0') {\r\n\r\n          //查询成功之后 开始进行调用预览\r\n          this.previewUrl = \"http://\" + window.server.filesUploadUrl + \":\"\r\n              + window.server.filesUploadPort\r\n              + res.data.documentPath.replace(window.server.filesUploadUrl,\"\");;\r\n          console.log(this.previewUrl);\r\n\r\n          window.open('http://' + window.server.filesUploadUrl  + ':'\r\n              + window.server.kkfileviewPort +'/onlinePreview?url='\r\n              + encodeURIComponent(Base64.encode(this.previewUrl)));\r\n        } else {\r\n          ElMessage({\r\n            message: '预览失败',\r\n            type: 'error',\r\n          })\r\n        }\r\n      });\r\n\r\n    },\r\n    handleSizeChange() {\r\n      this.load()\r\n    },\r\n\r\n    handleCurrentChange() {\r\n      this.load()\r\n    },\r\n    handleHisSizeChange() {\r\n      this.historyLoad()\r\n    },\r\n    handleHisCurrentChange() {\r\n      this.historyLoad()\r\n    },\r\n\r\n    handleDelete(id, documentPath) {\r\n      console.log(id)\r\n      request.delete(\"/document/\" + id).then(res => {\r\n        console.log(res);\r\n        if (res.code === '0') {\r\n          ElMessage({\r\n            message: '删除成功',\r\n            type: 'success',\r\n          })\r\n          this.del_file(documentPath)\r\n        } else {\r\n          ElMessage({\r\n            message: '删除失败',\r\n            type: 'error',\r\n          })\r\n        }\r\n        this.load();\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.table tbody tr:nth-child(odd) {\r\n  background-color: #F5F5F5;\r\n}\r\n\r\n.table tbody tr:nth-child(even) {\r\n  background-color: #8A77A5;\r\n}\r\n\r\n.table .el-table__row {\r\n  height: 60px; /* 设置行高为60px，可以根据实际情况进行调整 */\r\n}\r\n\r\n.el-table_3_column_12 .cell {\r\n  background-color: #F5F5F5;\r\n}\r\n\r\n.el-table_3_column_12 .cell.highlight {\r\n  background-color: #8A77A5;\r\n}\r\n\r\n.radio-group-container {\r\n  display: flex;\r\n}\r\n</style>\r\n","import script from \"./Document.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Document.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Document.vue?vue&type=style&index=0&id=40a4af69&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["upload","ref","updateDocument","__default__","name","components","data","previewUrl","form","historyForm","previewForm","formInline","search","userId","user","currentPage","pageSize","currentHisPage","pageHisSize","total","totalHis","dialogVisible","updatedDialogVisible","editDialogVisible","historyDialogVisible","fileData","EditData","oldFilePath","tableData","historyTableData","ids","selectedFiles","created","request","then","res","this","code","load","computed","isDisabledUpload","itemNo","documentType","trim","methods","async","length","file","url_raw","window","server","filesUploadUrl","filesUploadPort","documentPath","replace","console","log","url","link","document","createElement","href","target","download","split","pop","click","Promise","resolve","setTimeout","ElMessage","message","type","handleDeleteDrawings","del_files","handleSelectionChange","val","map","v","id","delay","records","error","showHistory","row","JSON","parse","stringify","historyLoad","downloadFile","updateVersion","$nextTick","$refs","clearFiles","handleDialogHisClose","handleCloseUpdateDialog","cancelUpate","handleCloseEditDialog","cancel","handleCloseDialog","updateFile","params","FormData","string","append","axios","method","headers","sessionStorage","getItem","response","documentVersion","newVersion","filePath","catch","handleBeforeUpdate","value","submit","uploadFile","handleBeforeUpload","exportExcel","ws","XLSX","wb","fileName","blob","Blob","bookType","FileSaver","getDocumentType","filesUploadSuccess","time","reset","resetFields","add","del_file","path","delDocumentPath","saveDocument","parseInt","fieldNames","materialNo","requiredFields","Object","keys","isFormValid","missingFields","i","field","push","msg","join","save","previewFile","open","kkfileviewPort","encodeURIComponent","Base64","handleSizeChange","handleCurrentChange","handleHisSizeChange","handleHisCurrentChange","handleDelete","__exports__"],"sourceRoot":""}