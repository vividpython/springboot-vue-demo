"use strict";(self["webpackChunkspringboot_vue_demo"]=self["webpackChunkspringboot_vue_demo"]||[]).push([[553],{8553:function(e,t,l){l.r(t),l.d(t,{default:function(){return I}});l(7658);var o=l(6252),a=l(2262),i=l(3577),s=l(5781),n=l(4471),r=l(1348),d=l(4105),m=l(3162),p=l(2300),c=l(6154);const u={style:{padding:"10px"}},h={style:{margin:"10px",padding:"0px"}},f={style:{margin:"10px",padding:"0px"}},g={style:{margin:"10px",padding:"0px"}},w={class:"btn-group"},y={class:"col"},b={class:"col"},k={style:{margin:"10px",padding:"0px"}},_={class:"radio-group-container"},W=(0,o._)("div",{class:"el-upload__tip"}," Any files with a size less than 10MB. ",-1),C={class:"dialog-footer"},U=(0,o._)("div",{class:"el-upload__tip"}," Any files with a size less than 10MB. ",-1),D={class:"dialog-footer"},v={class:"btn-group"},z={class:"col"},P={class:"col"},V={style:{margin:"10px",padding:"0px"}};let S=(0,a.iH)(),F=(0,a.iH)();const T={name:"Document",components:{},data(){return{previewUrl:"",form:{},historyForm:{},previewForm:{},formInline:{},search:"",userId:0,user:{},currentPage:1,pageSize:10,currentHisPage:1,pageHisSize:10,total:0,totalHis:0,dialogVisible:!1,updatedDialogVisible:!1,editDialogVisible:!1,historyDialogVisible:!1,fileData:"",EditData:"",oldFilePath:"",tableData:[],historyTableData:[],ids:[],selectedFiles:[]}},created(){n.Z.get("/getUserInfo").then((e=>{this.userId=e.data,n.Z.get("/user/"+this.userId).then((e=>{"0"===e.code&&(this.user=e.data)}))})),this.load()},computed:{isDisabledUpload(){const{itemNo:e,documentType:t}=this.form||{};return!e?.trim()||!t}},methods:{async handleDownLoadDrawings(){if(this.ids.length)for(const e of this.selectedFiles){const t=window.server.filesUploadUrl+":"+window.server.filesUploadPort+e.documentPath.replace(window.server.filesUploadUrl,"");console.log(t);const l="http://"+t,o=document.createElement("a");o.href=l,o.target="_blank",o.download=l.split("/").pop(),o.click(),await new Promise((e=>setTimeout(e,1e3)))}else(0,r.z8)({message:"请选择数据",type:"warning"})},handleDeleteDrawings(){this.ids.length?n.Z.post("/document/deleteBatch",this.ids).then((e=>{console.log(e),"0"===e.code?((0,r.z8)({message:"批量删除成功",type:"success"}),this.del_files(this.ids).then((()=>{this.load()}))):(0,r.z8)({message:"批量删除失败",type:"error"})})):(0,r.z8)({message:"请选择数据",type:"warning"})},handleSelectionChange(e){this.ids=e.map((e=>e.id)),this.selectedFiles=e,console.log("this.selectedFiles:"+this.selectedFiles)},async historyLoad(){try{await this.delay(1e3),n.Z.post(`/document/historyList/${this.currentHisPage}/${this.pageHisSize}`,this.historyForm).then((e=>{console.log(e),this.historyTableData=e.data.records,this.totalHis=e.data.total}))}catch(e){console.error(e)}},showHistory(e){this.historyForm=JSON.parse(JSON.stringify(e)),this.historyLoad(),this.historyDialogVisible=!0},downloadFile(e){const t=window.server.filesUploadUrl+":"+window.server.filesUploadPort+e.documentPath.replace(window.server.filesUploadUrl,"");console.log(t);const l="http://"+t,o=document.createElement("a");o.href=l,o.download=l.split("/").pop(),o.click()},updateVersion(e){this.form=JSON.parse(JSON.stringify(e)),this.oldFilePath=this.form.documentPath,this.updatedDialogVisible=!0,this.$nextTick((()=>{this.$refs["updateDocument"].clearFiles()}))},handleDialogHisClose(){this.historyTableData=[],this.historyDialogVisible=!1},handleCloseUpdateDialog(){this.cancelUpate()},handleCloseEditDialog(){this.cancel()},handleCloseDialog(){this.cancel()},updateFile(e){this.fileData=new FormData;let t=JSON.stringify(this.form);this.fileData.append("document",t),this.fileData.append("file",e.file),c.Z.request({method:"post",url:"http://"+window.server.filesUploadUrl+":9090/files/updateDocumentFiles",headers:{"Content-Type":"multipart/form-data",token:JSON.parse(sessionStorage.getItem("token"))},data:this.fileData}).then((e=>{let t=e.data;"0"===t.code&&((0,r.z8)({message:"更新成功",type:"success"}),this.form.documentVersion=t.data.newVersion,this.form.documentPath=t.data.filePath)})).catch((()=>{}))},handleBeforeUpdate(){F.value.submit()},uploadFile(e){this.fileData=new FormData;let t=JSON.stringify(this.form);this.fileData.append("document",t),this.fileData.append("file",e.file),c.Z.request({method:"post",url:"http://"+window.server.filesUploadUrl+":9090/files/uploadDocumentFiles",headers:{"Content-Type":"multipart/form-data",token:JSON.parse(sessionStorage.getItem("token"))},data:this.fileData}).then((e=>{let t=e.data;"0"===t.code&&((0,r.z8)({message:"上传成功",type:"success"}),this.form.documentVersion="A01",this.form.documentPath=t.data,this.oldFilePath=this.form.documentPath)})).catch((()=>{}))},handleBeforeUpload(){S.value.submit()},exportExcel(){const e=this.tableData,t=d.P6.json_to_sheet(e),l=d.P6.book_new();d.P6.book_append_sheet(l,t,"Sheet1");const o="图纸数据.xlsx",a=new Blob([d.cW(l,{bookType:"xlsx",type:"array"})],{type:"application/octet-stream"});m.saveAs(a,o)},getDocumentType(e){switch(e){case 1:return"材料清单";case 2:return"装配工艺图";case 3:return"电气接线图 ";case 4:return"变更通知单";case 5:return"技术交底单";default:return""}},filesUploadSuccess(e){this.form.documentPath=e.data},delay(e){return new Promise((t=>setTimeout(t,e)))},async load(){try{await this.delay(1e3),n.Z.post(`/document/${this.currentPage}/${this.pageSize}`,JSON.parse(JSON.stringify(this.formInline))).then((e=>{console.log(e),this.tableData=e.data.records,this.total=e.data.total}))}catch(e){console.error(e)}},reset(){this.formInline={},this.$refs["resetformInline"].resetFields()},add(){this.dialogVisible=!0,this.form={},this.$nextTick((()=>{this.$refs["upload"].clearFiles()}))},del_file(e){console.log("path"+e),n.Z.post("/files/delDocumentFile",{delDocumentPath:e}).then((e=>{console.log(e),"0"===e.code?(0,r.z8)({message:"nginx文件同步成功",type:"success"}):(0,r.z8)({message:"nginx文件同步失败",type:"error"})}))},del_files(e){return n.Z.post("/files/delDocumentFiles",this.ids).then((e=>{console.log(e),"0"===e.code?(0,r.z8)({message:"nginx文件同步成功",type:"success"}):(0,r.z8)({message:"nginx文件同步失败",type:"error"})}))},saveDocument(){if(this.form.documentType=parseInt(this.form.documentType),this.form.id){const e={itemNo:"产品编号",documentType:"图纸类型",materialNo:"料号",documentPath:"图纸文件"},t=Object.keys(e);let l=!0,o=[];for(let a=0;a<t.length;a++){const i=t[a];this.form[i]||(l=!1,o.push(e[i]))}l?n.Z.post("/document",this.form).then((e=>{"0"===e.code?((0,r.z8)({message:"更新成功",type:"success"}),this.load()):(0,r.z8)({message:e.msg,type:"error"})})):(0,r.z8)({message:`缺少以下字段：${o.join(", ")}`,type:"warning"})}this.updatedDialogVisible=!1},save(){this.form.documentType=parseInt(this.form.documentType);const e={itemNo:"产品编号",documentType:"图纸类型",materialNo:"料号",documentPath:"图纸文件"},t=Object.keys(e);let l=!0,o=[];for(let a=0;a<t.length;a++){const i=t[a];this.form[i]||(l=!1,o.push(e[i]))}l?n.Z.post("/document",this.form).then((e=>{console.log("进入新增"),"0"===e.code?((0,r.z8)({message:"新增成功",type:"success"}),this.load()):(console.log("this.form"+this.form),(0,r.z8)({message:e.msg,type:"error"}),console.log(this.oldFilePath),this.del_file(this.form.documentPath))})):(0,r.z8)({message:`缺少以下字段：${o.join(", ")}`,type:"warning"}),this.dialogVisible=!1},cancelUpate(){this.form.documentPath!==this.oldFilePath&&(console.log("用户上传过文件了"),console.log("this.form.documentPath:"+this.form.documentPath),this.del_file(this.form.documentPath)),this.updatedDialogVisible=!1},cancel(){""!==this.oldFilePath&&(console.log("this.oldFilePath:"+this.oldFilePath),this.del_file(this.oldFilePath)),this.dialogVisible=!1},previewFile(e){this.form=JSON.parse(JSON.stringify(e)),n.Z.get("/document/getId/"+this.form.id).then((e=>{console.log(e),"0"===e.code?(this.previewUrl="http://"+window.server.filesUploadUrl+":"+window.server.filesUploadPort+e.data.documentPath.replace(window.server.filesUploadUrl,""),console.log(this.previewUrl),window.open("http://"+window.server.filesUploadUrl+":"+window.server.kkfileviewPort+"/onlinePreview?url="+encodeURIComponent(p.DS.encode(this.previewUrl)))):(0,r.z8)({message:"预览失败",type:"error"})}))},handleSizeChange(){this.load()},handleCurrentChange(){this.load()},handleHisSizeChange(){this.historyLoad()},handleHisCurrentChange(){this.historyLoad()},handleDelete(e,t){console.log(e),n.Z["delete"]("/document/"+e).then((e=>{console.log(e),"0"===e.code?((0,r.z8)({message:"删除成功",type:"success"}),this.del_file(t)):(0,r.z8)({message:"删除失败",type:"error"}),this.load()}))}}};var x=Object.assign(T,{setup(e){return(e,t)=>{const l=(0,o.up)("el-button"),n=(0,o.up)("el-input"),r=(0,o.up)("el-form-item"),d=(0,o.up)("el-option"),m=(0,o.up)("el-select"),p=(0,o.up)("el-form"),c=(0,o.up)("el-popconfirm"),T=(0,o.up)("el-table-column"),x=(0,o.up)("el-table"),N=(0,o.up)("el-pagination"),I=(0,o.up)("el-radio"),H=(0,o.up)("el-radio-group"),O=(0,o.up)("el-upload"),Z=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.iD)("div",u,[(0,o._)("div",h,[(0,o.Wm)(l,{color:"#E0BF75",onClick:e.add},{default:(0,o.w5)((()=>[(0,o.Uk)("新增")])),_:1},8,["onClick"]),(0,o.Wm)(l,{color:"#958CDD",onClick:e.exportExcel},{default:(0,o.w5)((()=>[(0,o.Uk)("导出")])),_:1},8,["onClick"]),(0,o.Wm)(l,{color:"#FC9DA9",onClick:e.load},{default:(0,o.w5)((()=>[(0,o.Uk)("刷新")])),_:1},8,["onClick"])]),(0,o._)("div",f,[(0,o.Wm)(p,{inline:!0,model:e.formInline,class:"demo-form-inline",ref:"resetformInline"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{label:"料号"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{modelValue:e.formInline.materialNo,"onUpdate:modelValue":t[0]||(t[0]=t=>e.formInline.materialNo=t),placeholder:"please input",clearable:""},null,8,["modelValue"])])),_:1}),(0,o.Wm)(r,{label:"项目编号"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{modelValue:e.formInline.itemNo,"onUpdate:modelValue":t[1]||(t[1]=t=>e.formInline.itemNo=t),placeholder:"Please input"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(r,{label:"文件类型"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{modelValue:e.formInline.documentType,"onUpdate:modelValue":t[2]||(t[2]=t=>e.formInline.documentType=t),placeholder:"Please select"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{label:"材料清单",value:"1"}),(0,o.Wm)(d,{label:"装配工艺图",value:"2"}),(0,o.Wm)(d,{label:"电气接线图",value:"3"}),(0,o.Wm)(d,{label:"变更通知单",value:"4"}),(0,o.Wm)(d,{label:"技术交底单",value:"5"})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,{color:"#E0BF75",style:{"margin-left":"5px"},icon:(0,a.SU)(s.Search),onClick:e.load},{default:(0,o.w5)((()=>[(0,o.Uk)("查询")])),_:1},8,["icon","onClick"]),(0,o.Wm)(l,{color:"#E0BF75",style:{"margin-left":"5px"},icon:(0,a.SU)(s.RefreshLeft),onClick:e.reset},{default:(0,o.w5)((()=>[(0,o.Uk)("重置")])),_:1},8,["icon","onClick"])])),_:1})])),_:1},8,["model"])]),(0,o._)("div",g,[(0,o.Wm)(l,{type:"primary",onClick:e.handleDownLoadDrawings},{default:(0,o.w5)((()=>[(0,o.Uk)("批量下载")])),_:1},8,["onClick"]),(0,o.Wm)(c,{title:"Are you sure to delete this?",onConfirm:e.handleDeleteDrawings},{reference:(0,o.w5)((()=>[3!==e.user.role?((0,o.wg)(),(0,o.j4)(l,{key:0,type:"danger"},{default:(0,o.w5)((()=>[(0,o.Uk)("批量删除")])),_:1})):(0,o.kq)("",!0)])),_:1},8,["onConfirm"])]),(0,o.Wm)(x,{data:e.tableData,style:{width:"100%"},border:"",class:"table",stripe:!1,onSelectionChange:e.handleSelectionChange},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{type:"selection",width:"55"}),(0,o.Wm)(T,{prop:"id",label:"ID",sortable:""}),(0,o.Wm)(T,{prop:"itemNo",label:"项目编号"}),(0,o.Wm)(T,{prop:"materialNo",label:"料号"}),(0,o.Wm)(T,{prop:"documentName",label:"文件名称"}),(0,o.Wm)(T,{prop:"documentType",label:"文件类型"},{default:(0,o.w5)((t=>[(0,o.Uk)((0,i.zw)(e.getDocumentType(t.row.documentType)),1)])),_:1}),(0,o.Wm)(T,{prop:"sequenceNo",label:"文件序号"}),(0,o.Wm)(T,{prop:"documentVersion",label:"文件版本"}),(0,o.Wm)(T,{prop:"documentPath",label:"文件路径","min-width":200,ellipsis:!0,style:{"white-space":"nowrap","word-break":"break-all"}}),(0,o.Wm)(T,{prop:"createTime",label:"创建时间"}),(0,o.Wm)(T,{prop:"updateTime",label:"更新时间"}),(0,o.Wm)(T,{fixed:"right",label:"操作",width:"220"},{default:(0,o.w5)((t=>[(0,o._)("div",w,[(0,o._)("div",y,[(0,o.Wm)(l,{size:"small",onClick:l=>e.previewFile(t.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("预览 ")])),_:2},1032,["onClick"]),3!==e.user.role?((0,o.wg)(),(0,o.j4)(l,{key:0,size:"small",onClick:l=>e.updateVersion(t.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("更新 ")])),_:2},1032,["onClick"])):(0,o.kq)("",!0),(0,o.Wm)(c,{title:"Are you sure to delete this?",onConfirm:l=>e.handleDelete(t.row.id,t.row.documentPath)},{reference:(0,o.w5)((()=>[3!==e.user.role?((0,o.wg)(),(0,o.j4)(l,{key:0,type:"danger",size:"small"},{default:(0,o.w5)((()=>[(0,o.Uk)("删除")])),_:1})):(0,o.kq)("",!0)])),_:2},1032,["onConfirm"])]),(0,o._)("div",b,[(0,o.Wm)(l,{size:"small",onClick:l=>e.downloadFile(t.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("下载文件")])),_:2},1032,["onClick"]),(0,o.Wm)(l,{size:"small",onClick:l=>e.showHistory(t.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("历史版本")])),_:2},1032,["onClick"])])])])),_:1})])),_:1},8,["data","onSelectionChange"]),(0,o._)("div",k,[(0,o.Wm)(N,{"current-page":e.currentPage,"onUpdate:currentPage":t[3]||(t[3]=t=>e.currentPage=t),"page-size":e.pageSize,"onUpdate:pageSize":t[4]||(t[4]=t=>e.pageSize=t),"page-sizes":[5,10,20,40],layout:"total, sizes, prev, pager, next, jumper",total:e.total,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),(0,o.Wm)(Z,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[8]||(t[8]=t=>e.dialogVisible=t),title:"Tips",width:"50%","before-close":e.handleCloseDialog},{footer:(0,o.w5)((()=>[(0,o._)("span",C,[(0,o.Wm)(l,{onClick:e.cancel},{default:(0,o.w5)((()=>[(0,o.Uk)("取消")])),_:1},8,["onClick"]),(0,o.Wm)(l,{type:"primary",onClick:e.save},{default:(0,o.w5)((()=>[(0,o.Uk)(" 确认 ")])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(p,{model:e.form,"label-width":"120px"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{label:"项目编号"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{modelValue:e.form.itemNo,"onUpdate:modelValue":t[5]||(t[5]=t=>e.form.itemNo=t),style:{width:"80%"}},null,8,["modelValue"])])),_:1}),(0,o.Wm)(r,{label:"料号"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{modelValue:e.form.materialNo,"onUpdate:modelValue":t[6]||(t[6]=t=>e.form.materialNo=t),style:{width:"80%"}},null,8,["modelValue"])])),_:1}),(0,o.Wm)(r,{label:"图纸类型"},{default:(0,o.w5)((()=>[(0,o._)("div",_,[(0,o.Wm)(H,{modelValue:e.form.documentType,"onUpdate:modelValue":t[7]||(t[7]=t=>e.form.documentType=t)},{default:(0,o.w5)((()=>[(0,o.Wm)(I,{label:1},{default:(0,o.w5)((()=>[(0,o.Uk)("材料清单")])),_:1}),(0,o.Wm)(I,{label:2},{default:(0,o.w5)((()=>[(0,o.Uk)("装配工艺图")])),_:1}),(0,o.Wm)(I,{label:3},{default:(0,o.w5)((()=>[(0,o.Uk)("电气接线图")])),_:1}),(0,o.Wm)(I,{label:4},{default:(0,o.w5)((()=>[(0,o.Uk)("变更通知单")])),_:1}),(0,o.Wm)(I,{label:5},{default:(0,o.w5)((()=>[(0,o.Uk)("技术交底单")])),_:1})])),_:1},8,["modelValue"])])])),_:1}),(0,o.Wm)(r,{label:"选择文件"},{default:(0,o.w5)((()=>[(0,o.Wm)(O,{ref_key:"upload",ref:S,"auto-upload":!1,"http-request":e.uploadFile,disabled:e.isDisabledUpload},{trigger:(0,o.w5)((()=>[(0,o.Wm)(l,{type:"primary"},{default:(0,o.w5)((()=>[(0,o.Uk)("选择文件")])),_:1})])),tip:(0,o.w5)((()=>[W])),_:1},8,["http-request","disabled"])])),_:1}),(0,o.Wm)(r,{label:"上传文件"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(l,{type:"primary",onClick:e.handleBeforeUpload},{default:(0,o.w5)((()=>[(0,o.Uk)("点击上传")])),_:1},8,["onClick"])])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","before-close"]),(0,o.Wm)(Z,{modelValue:e.updatedDialogVisible,"onUpdate:modelValue":t[9]||(t[9]=t=>e.updatedDialogVisible=t),title:"Tips",width:"50%","before-close":e.handleCloseUpdateDialog},{footer:(0,o.w5)((()=>[(0,o._)("span",D,[(0,o.Wm)(l,{onClick:e.cancelUpate},{default:(0,o.w5)((()=>[(0,o.Uk)("取消")])),_:1},8,["onClick"]),(0,o.Wm)(l,{type:"primary",onClick:e.saveDocument},{default:(0,o.w5)((()=>[(0,o.Uk)(" 确认 ")])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(p,{model:e.form,"label-width":"120px"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{label:"选择文件"},{default:(0,o.w5)((()=>[(0,o.Wm)(O,{ref_key:"updateDocument",ref:F,"auto-upload":!1,"http-request":e.updateFile},{trigger:(0,o.w5)((()=>[(0,o.Wm)(l,{type:"primary"},{default:(0,o.w5)((()=>[(0,o.Uk)("选择文件")])),_:1})])),tip:(0,o.w5)((()=>[U])),_:1},8,["http-request"])])),_:1}),(0,o.Wm)(r,{label:"上传文件"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(l,{type:"primary",onClick:e.handleBeforeUpdate},{default:(0,o.w5)((()=>[(0,o.Uk)("点击上传")])),_:1},8,["onClick"])])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","before-close"]),(0,o.Wm)(Z,{modelValue:e.historyDialogVisible,"onUpdate:modelValue":t[12]||(t[12]=t=>e.historyDialogVisible=t),title:"Tips",width:"80%","close-on-click-modal":!1,"before-close":e.handleDialogHisClose},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{data:e.historyTableData,style:{width:"100%"},border:"",class:"table",stripe:!1},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{type:"selection",width:"55"}),(0,o.Wm)(T,{prop:"id",label:"ID",sortable:""}),(0,o.Wm)(T,{prop:"itemNo",label:"项目编号"}),(0,o.Wm)(T,{prop:"materialNo",label:"料号"}),(0,o.Wm)(T,{prop:"documentName",label:"文件名称"}),(0,o.Wm)(T,{prop:"documentType",label:"文件类型"},{default:(0,o.w5)((t=>[(0,o.Uk)((0,i.zw)(e.getDocumentType(t.row.documentType)),1)])),_:1}),(0,o.Wm)(T,{prop:"sequenceNo",label:"文件序号"}),(0,o.Wm)(T,{prop:"documentPath",label:"文件路径"}),(0,o.Wm)(T,{prop:"createTime",label:"创建时间"}),(0,o.Wm)(T,{prop:"updateTime",label:"更新时间"}),(0,o.Wm)(T,{fixed:"right",label:"操作",width:"220"},{default:(0,o.w5)((t=>[(0,o._)("div",v,[(0,o._)("div",z,[(0,o.Wm)(l,{size:"small",onClick:l=>e.previewFile(t.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("预览 ")])),_:2},1032,["onClick"]),(0,o.Wm)(l,{size:"small",onClick:l=>e.downloadFile(t.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("下载文件")])),_:2},1032,["onClick"])]),(0,o._)("div",P,[(0,o.Wm)(c,{title:"Are you sure to delete this?",onConfirm:l=>e.handleDelete(t.row.id,t.row.documentPath)},{reference:(0,o.w5)((()=>[3!==e.user.role?((0,o.wg)(),(0,o.j4)(l,{key:0,type:"danger",size:"small"},{default:(0,o.w5)((()=>[(0,o.Uk)("删除")])),_:1})):(0,o.kq)("",!0)])),_:2},1032,["onConfirm"])])])])),_:1})])),_:1},8,["data"]),(0,o._)("div",V,[(0,o.Wm)(N,{"current-page":e.currentHisPage,"onUpdate:currentPage":t[10]||(t[10]=t=>e.currentHisPage=t),"page-size":e.pageHisSize,"onUpdate:pageSize":t[11]||(t[11]=t=>e.pageHisSize=t),"page-sizes":[5,10,20,40],layout:"total, sizes, prev, pager, next, jumper",total:e.totalHis,onSizeChange:e.handleHisSizeChange,onCurrentChange:e.handleHisCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])),_:1},8,["modelValue","before-close"])])}}});const N=x;var I=N}}]);
//# sourceMappingURL=553.d8160fa8.js.map