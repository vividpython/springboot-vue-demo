"use strict";(self["webpackChunkspringboot_vue_demo"]=self["webpackChunkspringboot_vue_demo"]||[]).push([[755],{2174:function(e,t,o){var r=o(6252),n=(0,r.aZ)({name:"UserFilled"});const i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},a=(0,r.Wm)("path",{fill:"currentColor",d:"M288 320a224 224 0 1 0 448 0 224 224 0 1 0-448 0zm544 608H160a32 32 0 0 1-32-32v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 0 1-32 32z"},null,-1);function l(e,t,o,n,l,d){return(0,r.wg)(),(0,r.j4)("svg",i,[a])}n.render=l,n.__file="packages/components/UserFilled.vue",t["Z"]=n},903:function(e,t,o){var r=o(9812),n=r.defineComponent({name:"Lock"});const i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},a=r.createVNode("path",{fill:"currentColor",d:"M224 448a32 32 0 0 0-32 32v384a32 32 0 0 0 32 32h576a32 32 0 0 0 32-32V480a32 32 0 0 0-32-32H224zm0-64h576a96 96 0 0 1 96 96v384a96 96 0 0 1-96 96H224a96 96 0 0 1-96-96V480a96 96 0 0 1 96-96z"},null,-1),l=r.createVNode("path",{fill:"currentColor",d:"M512 544a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V576a32 32 0 0 1 32-32zm192-160v-64a192 192 0 1 0-384 0v64h384zM512 64a256 256 0 0 1 256 256v128H256V320A256 256 0 0 1 512 64z"},null,-1);function d(e,t,o,n,d,s){return r.openBlock(),r.createBlock("svg",i,[a,l])}n.render=d,n.__file="packages/components/Lock.vue",t.Z=n},9755:function(e,t,o){o.r(t),o.d(t,{default:function(){return b}});var r=o(6252),n=o(9963);const i={style:{width:"100%",height:"100vh","background-color":"#8A77A5",overflow:"hidden"}},a={style:{width:"400px",margin:"150px auto"}},l=(0,r._)("div",{style:{color:"#cccccc","font-size":"30px","text-align":"center"}},"欢迎登录",-1),d={style:{display:"flex"},id:"atilposition"};function s(e,t,o,s,u,m){const h=(0,r.up)("el-input"),c=(0,r.up)("el-form-item"),f=(0,r.up)("ValidCode"),p=(0,r.up)("el-button"),g=(0,r.up)("el-form");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("div",a,[l,(0,r.Wm)(g,{ref:"form",rules:u.rules,model:u.form,size:"default"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{prop:"username"},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{placeholder:"用户名","prefix-icon":m.UserFilled,modelValue:u.form.username,"onUpdate:modelValue":t[0]||(t[0]=e=>u.form.username=e)},null,8,["prefix-icon","modelValue"])])),_:1}),(0,r.Wm)(c,{prop:"password"},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{placeholder:"密码","prefix-icon":m.lock,modelValue:u.form.password,"onUpdate:modelValue":t[1]||(t[1]=e=>u.form.password=e),"show-password":""},null,8,["prefix-icon","modelValue"])])),_:1}),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r._)("div",d,[(0,r.wy)((0,r._)("input",{type:"text",ref:"inputCode","onUpdate:modelValue":t[2]||(t[2]=e=>u.inputCode=e),style:{width:"175px"},placeholder:"请输入验证码",clearable:""},null,512),[[n.nr,u.inputCode]]),(0,r._)("span",{onClick:t[3]||(t[3]=(...e)=>m.createCode&&m.createCode(...e)),id:"spancode"},[(0,r.Wm)(f,{identifyCode:u.code},null,8,["identifyCode"])])])])),_:1}),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,{style:{width:"100%"},type:"primary",onClick:m.login},{default:(0,r.w5)((()=>[(0,r.Uk)("登录")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["rules","model"])])])}o(7658);var u=o(2174),m=o(903),h=o(4471),c=o(1348);const f={class:"s-draw"},p=["width","height"];function g(e,t,o,n,i,a){return(0,r.wg)(),(0,r.iD)("div",f,[(0,r._)("canvas",{id:"s-draw",width:o.contentWidth,height:o.contentHeight},null,8,p)])}var w={name:"SIdentify",props:{identifyCode:{type:String,default:"1234"},fontSizeMin:{type:Number,default:25},fontSizeMax:{type:Number,default:30},backgroundColorMin:{type:Number,default:255},backgroundColorMax:{type:Number,default:255},colorMin:{type:Number,default:0},colorMax:{type:Number,default:160},lineColorMin:{type:Number,default:100},lineColorMax:{type:Number,default:255},dotColorMin:{type:Number,default:0},dotColorMax:{type:Number,default:255},contentWidth:{type:Number,default:132},contentHeight:{type:Number,default:31}},methods:{drawLine(e){for(let t=0;t<8;t++)e.strokeStyle=this.randomColor(this.lineColorMin,this.lineColorMax),e.beginPath(),e.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.stroke()},drawDot(e){for(let t=0;t<100;t++)e.fillStyle=this.randomColor(0,255),e.beginPath(),e.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),e.fill()},randomNum(e,t){return Math.floor(Math.random()*(t-e)+e)},randomColor(e,t){let o=this.randomNum(e,t),r=this.randomNum(e,t),n=this.randomNum(e,t);return"rgb("+o+","+r+","+n+")"},drawPic(){let e=document.getElementById("s-draw"),t=e.getContext("2d");t.textBaseline="bottom",t.fillStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),t.fillRect(0,0,this.contentWidth,this.contentHeight);for(let o=0;o<this.identifyCode.length;o++)this.drawText(t,this.identifyCode[o],o);this.drawLine(t),this.drawDot(t)},drawText(e,t,o){e.fillStyle=this.randomColor(this.colorMin,this.colorMax),e.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei";let r=(o+1)*(this.contentWidth/(this.identifyCode.length+1)),n=this.randomNum(this.fontSizeMax,this.contentHeight-5);var i=this.randomNum(-45,45);e.translate(r,n),e.rotate(i*Math.PI/180),e.fillText(t,0,0),e.rotate(-i*Math.PI/180),e.translate(-r,-n)}},watch:{identifyCode(){this.drawPic()}},mounted(){this.drawPic()}},C=o(3744);const y=(0,C.Z)(w,[["render",g],["__scopeId","data-v-dd087592"]]);var v=y,x={components:{ValidCode:v},name:"Login",computed:{lock(){return m.Z},UserFilled(){return u.Z}},data(){return{code:"",inputCode:"",form:{},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},created(){sessionStorage.removeItem("user")},mounted(){this.createCode()},methods:{createCode(){let e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let o=0;o<4;o++)e+=t.charAt(Math.floor(Math.random()*t.length));this.code=e},login(){let e=this;this.$refs["form"].validate((t=>{if(t){if(""===this.inputCode)return void(0,c.z8)({message:"请输入验证码",type:"warning"});if(this.inputCode.toLowerCase()!==this.code.toLowerCase())return(0,c.z8)({message:"验证码错误",type:"error"}),this.inputCode="",void this.createCode();h.Z.post("/user/login",this.form).then((t=>{"0"===t.code?((0,c.z8)({message:"登录成功",type:"success"}),console.log("res.data=="+t.data.token),sessionStorage.setItem("token",JSON.stringify(t.data.token)),e.$router.push("/")):(0,c.z8)({message:"登录失败",type:"error"})}))}}))}}};const M=(0,C.Z)(x,[["render",s]]);var b=M}}]);
//# sourceMappingURL=755.5c2247a0.js.map